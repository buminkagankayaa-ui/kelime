<!DOCTYPE html>
<html lang="tr" data-theme="dark">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
Â  <title>Vocabify</title>
Â  <meta name="theme-color" content="#0b1220" id="meta-theme">
Â  <style>
    :root {
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-top: env(safe-area-inset-top, 0px);
      --header-h: 60px;
      --nav-h: 78px;
      --radius: 18px;
      /* VarsayÄ±lan Dark Tema Renkleri */
      --bg: #0b1220;
      --card: #111b2d;
      --card2: #0f172a;
      --border: #25324a;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --primary: #6366f1;
      --danger: #ef4444;
      --warn: #f59e0b;
      --ok: #10b981;
    }

    [data-theme="light"] {
      --bg: #f8fafc; --card: #ffffff; --card2: #f1f5f9; --border: #cbd5e1;
      --text: #0f172a; --muted: #64748b; --primary: #4f46e5;
      --danger: #dc2626; --warn: #d97706; --ok: #059669;
    }
    [data-theme="ocean"] { --bg:#06131f; --card:#0b2236; --card2:#0a1b2a; --border:#245070; --text:#e6f2ff; --muted:#9bb7d3; --primary:#38bdf8; }
    [data-theme="emerald"] { --bg:#071a14; --card:#0b2a21; --card2:#082018; --border:#1f6b52; --text:#ecfdf5; --muted:#9fe3c7; --primary:#10b981; }
    [data-theme="sunset"] { --bg:#1b1020; --card:#2a1731; --card2:#1f1225; --border:#6b2a59; --text:#fff7ed; --muted:#fbcfe8; --primary:#fb7185; }
    [data-theme="rose"] { --bg:#120a10; --card:#1f0f1b; --card2:#160b13; --border:#7f1d1d; --text:#fff1f2; --muted:#fda4af; --primary:#f43f5e; }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Inter", Roboto, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden; /* SayfanÄ±n genel kaymasÄ±nÄ± engeller */
    }

/* 1. BAÅLIK AYARI: Ekrana Ã§iviliyoruz ve arkasÄ±nÄ± kapatÄ±yoruz */
    header {
      position: fixed; /* Sabitlendi */
      top: 0; left: 0; right: 0;
      z-index: 999; /* En Ã¼st katmanda duracak */
      
      height: calc(var(--header-h) + var(--safe-top));
      padding-top: var(--safe-top);
      
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-left: 16px;
      padding-right: 16px;
      
      background: var(--bg); /* Tam renk (ÅeffaflÄ±k yok) */
      border-bottom: 1px solid var(--border);
      backdrop-filter: none; /* BulanÄ±klÄ±k kapalÄ± */
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 950;
    }

    .logo {
      width: 18px;
      height: 18px;
      border: 2px solid var(--primary);
      border-radius: 6px;
      transform: rotate(15deg);
    }

    .iconBtn {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      display: grid;
      place-items: center;
      cursor: pointer;
      user-select: none;
    }

    .iconBtn:active {
      transform: scale(.98);
      opacity: .9;
    }

    /* --- DÃœZELTÄ°LEN VIEWPORT VE VIEW KISMI --- */
    #viewport {
      position: relative;
      width: 100%;
      height: calc(100vh - (var(--header-h) + var(--safe-top)));
      overflow: hidden;
      background: var(--bg);
    }

   /* 2. SAYFA Ä°Ã‡ERÄ°K AYARI: BaÅŸlÄ±ÄŸÄ±n altÄ±ndan baÅŸlatÄ±yoruz */
    .view {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      
      /* KRÄ°TÄ°K KISIM: Ä°Ã§eriÄŸi yukarÄ±dan "Header Boyu + 20px" kadar aÅŸaÄŸÄ± itiyoruz */
      padding-top: calc(var(--header-h) + var(--safe-top) + 0px);
      
      padding-left: 18px;
      padding-right: 18px;
      /* Alttaki menÃ¼ payÄ± */
      padding-bottom: calc(var(--nav-h) + var(--safe-bottom) + 20px);
      
      overflow-y: auto;
      overflow-x: hidden;
      background: var(--bg);
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: opacity 0.25s ease, transform 0.25s ease;
      z-index: 10;
    }

    .view.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
      z-index: 20;
    }
    /* ----------------------------------------- */

    .row { display: flex; gap: 12px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; }
    .muted { color: var(--muted); }
    .big { font-size: 34px; font-weight: 980; }
    .h2 { font-size: 20px; font-weight: 980; margin: 0 0 12px 0; }
    .secTitle { font-size: 12px; letter-spacing: .12em; text-transform: uppercase; color: var(--muted); font-weight: 950; margin: 4px 0 10px; }
    
    .btn {
      border: 0; cursor: pointer; border-radius: 16px; padding: 14px 16px; font-weight: 980;
      display: flex; align-items: center; justify-content: center; gap: 10px; user-select: none;
    }
    .btn:active { transform: scale(.985); opacity: .92; }
    .btnPrimary { background: var(--primary); color: white; }
    .btnSoft { background: var(--card2); color: var(--text); border: 1px solid var(--border); }
    .btnDanger { background: var(--danger); color: white; }
    .btnOk { background: var(--ok); color: white; }
    .btnHalf { flex: 1; }

    nav {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 30;
      height: calc(var(--nav-h) + var(--safe-bottom));
      padding-bottom: var(--safe-bottom);
      background: var(--card2);
      border-top: 1px solid var(--border);
      display: flex;
    }

    .navBtn {
      flex: 1; background: transparent; border: 0; color: var(--muted);
      cursor: pointer; user-select: none;
      display: grid; grid-template-rows: 36px 18px;
      align-items: center; justify-items: center;
      padding: 6px 0; line-height: 1; min-width: 0;
    }
    .navBtn .ico { width: 46px; height: 36px; display: grid; place-items: center; font-size: 20px; line-height: 1; }
    .navBtn span { font-size: 11.5px; font-weight: 980; line-height: 1; transform: translateY(-1px); white-space: nowrap; }
    .navBtn.active { color: var(--primary); }
    .navBtn.active .ico { background: color-mix(in srgb, var(--primary) 15%, transparent); border-radius: 14px; }

    .backdrop { position: fixed; inset: 0; z-index: 40; background: rgba(0,0,0,.55); opacity: 0; pointer-events: none; transition: .2s ease; }
    .backdrop.open { opacity: 1; pointer-events: auto; }

    /* SHEET (AÃ§Ä±lÄ±r pencerelerin gizli kalmasÄ±nÄ± saÄŸlayan kod) */
    .sheet {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 50;
      background: var(--card);
      border-radius: 26px 26px 0 0;
      border: 1px solid var(--border);
      transform: translateY(110%); /* Ekran dÄ±ÅŸÄ±na itiyoruz */
      transition: .25s ease;
      max-height: 85vh; overflow: auto;
      padding: 14px 16px calc(16px + var(--safe-bottom));
    }
    .sheet.open { transform: none; } /* AÃ§Ä±lÄ±nca ekrana gelir */

    .handle { width: 48px; height: 5px; border-radius: 99px; background: var(--border); margin: 6px auto 14px; }
    .field { margin: 10px 0; }
    label { display: block; font-size: 12px; font-weight: 980; color: var(--muted); margin-bottom: 6px; }
    input, textarea, select {
      width: 100%; background: var(--card2); border: 1px solid var(--border); border-radius: 16px;
      padding: 14px; color: var(--text); font-size: 16px; outline: none;
    }
    textarea { min-height: 92px; resize: none; }
    .two { display: flex; gap: 10px; }
    .smallInfo { font-size: 12px; color: var(--muted); font-weight: 950; margin-top: 6px; }
    
    .toast {
      position: fixed; left: 50%; top: calc(14px + var(--safe-top));
      transform: translate(-50%,-20px);
      background: var(--text); color: var(--bg);
      padding: 10px 14px; border-radius: 99px; font-weight: 980;
      opacity: 0; pointer-events: none; transition: .25s ease; z-index: 200;
      max-width: calc(100vw - 20px); text-align: center;
    }
    .toast.show { opacity: 1; transform: translate(-50%,0); }

    .cardLine { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
    .termBig { font-weight: 980; color: var(--primary); font-size: 20px; }
    .badge {
      font-size: 11px; font-weight: 980; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border);
      color: var(--muted); background: color-mix(in srgb, var(--card2) 60%, transparent); white-space: nowrap;
    }
    .badge.due { color: var(--warn); border-color: color-mix(in srgb, var(--warn) 45%, var(--border)); background: color-mix(in srgb, var(--warn) 10%, transparent); }
    .divider { height: 1px; background: var(--border); margin: 12px 0; }
    .kbd { font-size: 11px; font-weight: 980; border: 1px solid var(--border); padding: 4px 8px; border-radius: 10px; background: var(--card); color: var(--muted); }

    /* --- QUIZ EKRANI OPTÄ°MÄ°ZASYONU --- */
    .overlay {
      position: fixed;
      inset: 0; /* Tam ekran kapla */
      z-index: 2000; /* En Ã¼stte */
      background: var(--bg);
      transform: translateX(110%);
      transition: .25s cubic-bezier(0.4, 0, 0.2, 1); /* Daha yumuÅŸak geÃ§iÅŸ */
      display: flex;
      flex-direction: column;
    }
    
    .overlay.open { transform: none; }

    .overlayTop {
      /* Ãœst BaÅŸlÄ±k AyarÄ± */
      display: flex; 
      align-items: center; 
      justify-content: space-between;
      
      /* GÃ¼venli alan + 10px boÅŸluk */
      padding-top: calc(var(--safe-top) + 14px);
      padding-bottom: 14px;
      padding-left: 16px;
      padding-right: 16px;
      
      background: var(--bg);
      /* Ä°STEDÄ°ÄÄ°N Ã‡Ä°ZGÄ° BURADA: */
      border-bottom: 1px solid var(--border); 
    }

    #quizBody {
      flex: 1; /* Kalan alanÄ± kapla */
      overflow-y: auto; /* Ä°Ã§erik sÄ±ÄŸmazsa kaydÄ±r */
      padding: 16px; /* Kenarlardan boÅŸluk */
      display: flex;
      flex-direction: column;
      gap: 12px; /* Ã–ÄŸeler arasÄ± mesafe */
    }

    /* Soru KartÄ±nÄ± SÄ±kÄ±laÅŸtÄ±rÄ±yoruz */
    .qCard {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 20px 16px; /* Ä°Ã§ boÅŸluÄŸu azalttÄ±k */
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2); /* Hafif gÃ¶lge ekledik */
    }

    .qChoice { 
      text-align: left; 
      background: var(--card2); /* ÅÄ±klar biraz daha koyu olsun */
      border: 1px solid var(--border); 
      padding: 14px 16px; 
      border-radius: 14px; 
      cursor: pointer; 
      font-weight: 600;
      font-size: 15px;
      transition: 0.1s;
    }
    .qChoice:active { transform: scale(0.98); }
    .qChoice.correct { border-color: var(--ok); background: color-mix(in srgb, var(--ok) 15%, var(--card)); color: var(--ok); }
    .qChoice.wrong { border-color: var(--danger); background: color-mix(in srgb, var(--danger) 15%, var(--card)); color: var(--danger); }
Â  </style>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo"></div>
    <div style="font-size: 19px; letter-spacing: -0.5px;">Vocabify</div>
  </div>
  
  <div style="display:flex; gap:8px;">
    <button class="iconBtn" id="btnTheme">ğŸ¨</button>
    <button class="iconBtn" id="btnSettings">âš™ï¸</button>
  </div>
</header>

<div id="viewport">
Â  <section class="view active" id="home">
    
    <div class="secTitle" style="margin-top:0; margin-bottom:6px; font-size:11px; opacity:0.6;">GENEL BAKIÅ</div>
    
    <div class="grid-2" style="margin-top:0; margin-bottom:8px;">
      
      <div class="card" style="border:1px solid var(--primary); padding:8px; display:flex; flex-direction:column; gap:4px;">
        <div style="font-weight:bold; color:var(--primary); font-size:10px;">ğŸ‡¬ğŸ‡§ EN â¡ï¸ ğŸ‡¹ğŸ‡· TR</div>
        <div style="display:flex; gap:4px;">
          <input id="quickTransInput" placeholder="Write..." style="background:var(--bg); font-size:13px; width:100%; border-radius:6px; padding:6px;" onkeydown="if(event.key==='Enter') doQuickTranslate()" />
          <button class="iconBtn" style="background:var(--primary); color:white; border:none; width:32px; height:32px; border-radius:6px; flex-shrink:0;" onclick="doQuickTranslate()">ğŸ”</button>
        </div>
      </div>

      <div class="card" style="border:1px solid var(--warn); padding:8px; display:flex; flex-direction:column; gap:4px;">
        <div style="font-weight:bold; color:var(--warn); font-size:10px;">ğŸ‡¹ğŸ‡· TR â¡ï¸ ğŸ‡¬ğŸ‡§ EN</div>
        <div style="display:flex; gap:4px;">
          <input id="quickTransInputTR" placeholder="Yaz..." style="background:var(--bg); font-size:13px; width:100%; border-radius:6px; padding:6px;" onkeydown="if(event.key==='Enter') doQuickTranslateTR()" />
          <button class="iconBtn" style="background:var(--warn); color:white; border:none; width:32px; height:32px; border-radius:6px; flex-shrink:0;" onclick="doQuickTranslateTR()">ğŸ”</button>
        </div>
      </div>
    </div>

    <div class="grid-2" style="margin-bottom:8px; gap:8px;">
      
      <div class="card" style="padding:0 12px; height:50px; display:flex; align-items:center; justify-content:space-between;">
        <span class="muted" style="font-size:12px; font-weight:bold;">Toplam</span>
        <span style="font-size:22px; font-weight:900;" id="dashTotal">0</span>
      </div>
      
      <div class="card" style="padding:0 12px; height:50px; display:flex; align-items:center; justify-content:space-between; border:1px solid color-mix(in srgb, var(--warn) 30%, transparent);">
        <span style="font-size:12px; font-weight:bold; color:var(--warn);">Tekrar</span>
        <span style="font-size:22px; font-weight:900; color:var(--warn);" id="dashDue">0</span>
      </div>

    </div>

    <div class="secTitle" style="margin-bottom:6px; font-size:11px; opacity:0.6;">Ä°ÅLEMLER</div>

    <div class="grid-2" style="gap:8px; margin-bottom:8px;">
       <button class="btn btnPrimary" onclick="showView('review')" style="height:44px; font-size:13px;">ğŸ§  Tekrar BaÅŸlat</button>
       <button class="btn btnSoft" onclick="showView('cards')" style="height:44px; font-size:13px;">ğŸ“‚ Kart Listesi</button>
       <button class="btn btnSoft" onclick="openManualAdd()" style="height:44px; font-size:13px;">â• Yeni Ekle</button>
       <button class="btn btnSoft" onclick="refreshQueue()" style="height:44px; font-size:13px;">â™»ï¸ SÄ±rayÄ± Yenile</button>
    </div>

    <button class="btn" onclick="openGrammar()" style="width:100%; height:40px; font-size:13px; background:color-mix(in srgb, var(--primary) 10%, var(--card)); color:var(--primary); border:1px solid var(--primary); font-weight:bold;">
       ğŸ“˜ HÄ±zlÄ± Gramer KitapÃ§Ä±ÄŸÄ±
    </button>
Â  </section>

Â  <section class="view" id="review">
    <div style="margin-top:4px;">
      <h2 class="h2" style="margin-bottom:14px;">Tekrar Durumu</h2>

      <div class="grid-2">
        <div class="card" style="display:flex; flex-direction:column; justify-content:center; text-align:center;">
           <div class="muted" style="font-weight:980; font-size:13px;">SÄ±radaki</div>
           <div class="big" id="rvDue" style="margin-top:4px;">0</div>
        </div>
        
        <div class="card" style="display:flex; flex-direction:column; justify-content:center; text-align:center;">
           <div class="muted" style="font-weight:980; font-size:13px;">Toplam</div>
           <div class="big" id="rvTotal" style="margin-top:4px;">0</div>
        </div>
      </div>

      <div class="card" style="margin-top:14px;">
        <div style="font-weight:bold; margin-bottom:12px; text-align:center;">BugÃ¼n kaÃ§ kart Ã§alÄ±ÅŸacaksÄ±n?</div>
        
        <div id="limitContainer" style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
          <button class="btn btnSoft" style="flex:1; min-width:50px;" onclick="startReviewQuiz(5, this)">5</button>
          <button class="btn btnSoft" style="flex:1; min-width:50px;" onclick="startReviewQuiz(10, this)">10</button>
          <button class="btn btnSoft" style="flex:1; min-width:50px;" onclick="startReviewQuiz(20, this)">20</button>
          <button class="btn btnSoft" style="flex:1; min-width:60px;" onclick="startReviewQuiz(9999, this)">Hepsi</button>
        </div>

        <div class="divider"></div>
        
        <button class="btn btnPrimary" style="width:100%; margin-top:10px;" onclick="startReviewQuiz()">ğŸš€ BaÅŸlat</button>
        
        <button class="btn btnSoft" style="width:100%; margin-top:10px;" onclick="toggleQuizMode()">Mod: <span id="quizModeLabel">SeÃ§meli</span></button>
      </div>

      <div class="grid-2">
         <button class="btn btnSoft" onclick="clearProgress()">â™»ï¸ SRS SÄ±fÄ±rla</button>
         <button class="btn btnSoft" onclick="toast('Online AutoFill aktif âœ…')">Durum</button>
      </div>
    </div>
  </section>

<section class="view" id="cards">
    <div style="margin-top:4px; display:flex; justify-content:space-between; align-items:center; margin-bottom:14px;">
      <h2 class="h2" style="margin:0;">Kart Listesi</h2>
      <button class="btn btnSoft" style="padding:8px 14px; height:40px;" onclick="openManualAdd()">â• Ekle</button>
    </div>

    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; margin-bottom:14px;">
      
      <div id="filterBtnNew" class="card" onclick="toggleFilter('new')" 
           style="padding:10px; border:1px solid var(--border); text-align:center; cursor:pointer; display:flex; flex-direction:column; justify-content:center; height:80px;">
        <div style="font-size:11px; font-weight:bold; color:var(--muted);">âšª Yeni</div>
        <div style="font-size:20px; font-weight:900; margin-top:6px;" id="statNew">0</div>
      </div>
      
      <div id="filterBtnLearn" class="card" onclick="toggleFilter('learning')" 
           style="padding:10px; border:1px solid var(--warn); text-align:center; background:color-mix(in srgb, var(--warn) 5%, var(--card2)); cursor:pointer; display:flex; flex-direction:column; justify-content:center; height:80px;">
        <div style="font-size:11px; font-weight:bold; color:var(--warn);">ğŸŸ¡ Ã–ÄŸren</div>
        <div style="font-size:20px; font-weight:900; color:var(--warn); margin-top:6px;" id="statLearn">0</div>
      </div>
      
      <div id="filterBtnMaster" class="card" onclick="toggleFilter('mastered')" 
           style="padding:10px; border:1px solid var(--ok); text-align:center; background:color-mix(in srgb, var(--ok) 5%, var(--card2)); cursor:pointer; display:flex; flex-direction:column; justify-content:center; height:80px;">
        <div style="font-size:11px; font-weight:bold; color:var(--ok);">ğŸŸ¢ Tamam</div>
        <div style="font-size:20px; font-weight:900; color:var(--ok); margin-top:6px;" id="statMaster">0</div>
      </div>
    </div>

    <div class="card" style="margin-bottom:12px; padding:12px;">
      <input id="search" placeholder="Kart ara (kelime/anlam)..." style="background:var(--bg); border:none; padding:0; font-size:16px; width:100%; outline:none;" />
      <div class="smallInfo" style="margin-top:6px;">KartÄ± aÃ§ â†’ dÃ¼zenle / sil.</div>
    </div>

    <div id="cardsList" style="padding-bottom:80px;"></div>
  </section>
</div>

<nav>
Â  <button class="navBtn active" id="navHome" onclick="go('home')"><div class="ico">ğŸ </div><span>Ana Sayfa</span></button>
Â  <button class="navBtn" id="navReview" onclick="go('review')"><div class="ico">ğŸ§ </div><span>Tekrar</span></button>
Â  <button class="navBtn" id="navCards" onclick="go('cards')"><div class="ico">ğŸ—‚ï¸</div><span>Kartlar</span></button>
</nav>

<div class="backdrop" id="backdrop" onclick="closeSheets()"></div>
<div class="toast" id="toast">â€”</div>

<!-- Manual Add -->
<div class="sheet" id="manualAddSheet">
Â  <div class="handle"></div>
Â  <h2 class="h2">Elle Kelime Ekle (Online Otomatik)</h2>

Â  <div class="field">
Â  Â  <label>Dil</label>
Â  Â  <select id="maLang">
Â  Â  Â  <option value="EN">Ä°ngilizce</option>
Â  Â  Â  <option value="RU">RusÃ§a</option>
Â  Â  Â  <option value="DE">Almanca</option>
Â  Â  Â  <option value="ES">Ä°spanyolca</option> <option value="FR">FransÄ±zca</option>
Â  Â  Â  <option value="TR">TÃ¼rkÃ§e</option>
Â  Â  </select>
Â  </div>
Â  <div class="field">
Â  Â  <label>Kelime / Terim</label>
Â  Â  <input id="maTerm" placeholder="Ã–rn: reinforcement" />
Â  Â  <div class="smallInfo" id="maHint">YazÄ±nca otomatik doldurur. Ä°nternet ÅŸart.</div>
Â  </div>

Â  <div class="field">
Â  Â  <label>AnlamÄ± (TR) - (Ã‡oklu Anlam)</label>
Â  Â  <textarea id="maMeaning" placeholder="Otomatik dolacak (Ã‡oklu anlam)" style="min-height:60px; font-family:inherit; background:var(--card2); border:1px solid var(--border); border-radius:16px; width:100%; padding:14px; color:var(--text);"></textarea>
Â  </div>

Â  <div class="field">
Â  Â  <label>TÃ¼r</label>
Â  Â  <select id="maType">
Â  Â  Â  <option value="word">Kelime</option>
Â  Â  Â  <option value="phrase">KalÄ±p</option>
Â  Â  Â  <option value="idiom">Deyim</option>
Â  Â  Â  <option value="phrasal">Phrasal Verb</option>
Â  Â  Â  <option value="noun">Ä°sim</option>
Â  Â  Â  <option value="verb">Fiil</option>
Â  Â  Â  <option value="adj">SÄ±fat</option>
Â  Â  Â  <option value="adv">Zarf</option>
Â  Â  </select>
Â  </div>

Â  <div class="field">
Â  Â  <label>Ã–rnek CÃ¼mle</label>
Â  Â  <textarea id="maExample" placeholder="Otomatik dolacak"></textarea>
Â  </div>

Â  <div class="field">
Â  Â  <label>Not (opsiyonel)</label>
Â  Â  <input id="maNote" placeholder="Ä°pucu/Not" />
Â  </div>

Â  <div class="two" style="margin-top:10px;">
Â  Â  <button class="btn btnSoft btnHalf" onclick="closeSheets()">VazgeÃ§</button>
Â  Â  <button class="btn btnSoft btnHalf" onclick="autoFillManualFields(true)">âš¡ Doldur</button>
Â  </div>
Â  <div class="two" style="margin-top:10px;">
Â  Â  <button class="btn btnPrimary btnHalf" onclick="saveManualCard()">Kaydet</button>
Â  Â  <button class="btn btnDanger btnHalf" onclick="clearManual()">Temizle</button>
Â  </div>
</div>

<!-- Settings -->
<div class="sheet" id="settingsSheet">
Â  <div class="handle"></div>
Â  <h2 class="h2">Ayarlar</h2>

Â  <div class="card" style="margin-top:10px;">
Â  Â  <div style="font-weight:980;">Tema</div>
Â  Â  <div class="two" style="margin-top:10px;">
Â  Â  Â  <select id="themeSelect" onchange="applyThemeFromSelect()">
Â  Â  Â  Â  <option value="dark">dark</option>
Â  Â  Â  Â  <option value="light">light</option>
Â  Â  Â  Â  <option value="ocean">ocean</option>
Â  Â  Â  Â  <option value="emerald">emerald</option>
Â  Â  Â  Â  <option value="sunset">sunset</option>
Â  Â  Â  Â  <option value="rose">rose</option>
Â  Â  Â  </select>
Â  Â  Â  <button class="btn btnSoft" style="padding:12px 12px;" onclick="document.getElementById('btnTheme').click()">DÃ¶ndÃ¼r</button>
Â  Â  </div>
Â  </div>

Â  <div class="card" style="margin-top:12px;">
Â  Â  <div style="font-weight:980;">Quiz Modu</div>
Â  Â  <div class="two" style="margin-top:10px;">
Â  Â  Â  <button class="btn btnSoft btnHalf" onclick="toggleQuizMode()">Mod: <span id="quizModeLabel2">SeÃ§meli</span></button>
Â  Â  Â  <button class="btn btnSoft btnHalf" onclick="exportAll()">Export</button>
Â  Â  </div>
Â  Â  <div class="two" style="margin-top:10px;">
Â  Â  Â  <button class="btn btnSoft btnHalf" onclick="importAllPrompt()">Import</button>
Â  Â  Â  <button class="btn btnDanger btnHalf" onclick="hardReset()">SÄ±fÄ±rla</button>
Â  Â  </div>
Â  </div>

Â  <div class="smallInfo" style="margin-top:12px;">SÃ¼rÃ¼m: online-autofill â€¢ dictionary + translate â€¢ no level/category</div>
</div>

<!-- Quiz overlay -->
Â  <div class="sheet" id="transResultSheet" style="height:auto; max-height:80vh;">
Â  <div class="handle"></div>
Â  <h2 class="h2">Ã‡eviri Sonucu</h2>
Â Â 
Â  <div id="trResContent" style="line-height:1.6;"></div>

Â  <button class="btn btnPrimary" style="width:100%; margin-top:16px;" onclick="copyToManualAdd()">â• Bu Kelimeyi Karta Ekle</button>
Â  <button class="btn btnSoft" style="width:100%; margin-top:10px;" onclick="closeSheets()">Kapat</button>
</div>
Â  <div class="sheet" id="grammarSheet" style="height:90vh;">
<div class="handle"></div>
<h2 class="h2" style="color:var(--primary); text-align:center; padding-bottom:10px; margin-top:0; border-bottom:1px solid var(--border);">ğŸ“˜ Ä°ngilizce Ä°puÃ§larÄ±</h2>
  <div class="card" style="margin-top:14px; margin-bottom:14px; padding:0; overflow:hidden; border:1px solid var(--border);">
    <div style="background:var(--card2); padding:10px; font-weight:900; border-bottom:1px solid var(--border); text-align:center;">ğŸ‘¤ Zamirler (Pronouns)</div>
    <table style="width:100%; border-collapse:collapse; font-size:13px; text-align:center;">
      <tr style="background:color-mix(in srgb, var(--primary) 15%, transparent); font-weight:bold;">
        <td style="padding:8px;">Ben</td>
        <td style="padding:8px;">Beni</td>
        <td style="padding:8px;">Benim</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">I</td>
        <td style="padding:8px;">Me</td>
        <td style="padding:8px;">My</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">You</td>
        <td style="padding:8px;">You</td>
        <td style="padding:8px;">Your</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">He/She</td>
        <td style="padding:8px;">Him/Her</td>
        <td style="padding:8px;">His/Her</td>
      </tr>
      <tr>
        <td style="padding:8px; font-weight:bold; color:var(--primary);">They</td>
        <td style="padding:8px;">Them</td>
        <td style="padding:8px;">Their</td>
      </tr>
    </table>
  </div>

  <div class="card" style="margin-bottom:14px; padding:0; overflow:hidden; border:1px solid var(--border);">
    <div style="background:var(--card2); padding:10px; font-weight:900; border-bottom:1px solid var(--border); text-align:center;">â³ Zamanlar (Tenses)</div>
    <table style="width:100%; border-collapse:collapse; font-size:13px;">
      <tr style="background:color-mix(in srgb, var(--primary) 15%, transparent);">
        <th style="padding:8px; text-align:left;">Zaman</th>
        <th style="padding:8px; text-align:left;">Ä°pucu</th>
        <th style="padding:8px; text-align:left;">Ã–rnek</th>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold;">Genel</td>
        <td style="padding:8px; color:var(--muted);">Her gÃ¼n</td>
        <td style="padding:8px;">I <b style="color:var(--primary)">play</b>.</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold;">Åimdiki</td>
        <td style="padding:8px; color:var(--muted);">Åu an</td>
        <td style="padding:8px;">I am <b style="color:var(--primary)">playing</b>.</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold;">GeÃ§miÅŸ</td>
        <td style="padding:8px; color:var(--muted);">DÃ¼n</td>
        <td style="padding:8px;">I <b style="color:var(--primary)">played</b>.</td>
      </tr>
      <tr>
        <td style="padding:8px; font-weight:bold;">Gelecek</td>
        <td style="padding:8px; color:var(--muted);">YarÄ±n</td>
        <td style="padding:8px;">I <b style="color:var(--primary)">will play</b>.</td>
      </tr>
    </table>
  </div>

  <div class="card" style="margin-bottom:14px;">
    <div style="font-weight:900; color:var(--warn); margin-bottom:10px; text-align:center;">ğŸ› ï¸ Modals (Kip Ekleri)</div>
    
    <div class="grid-2">
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px solid var(--border); text-align:center;">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">CAN</div>
        <div style="font-size:11px; color:var(--muted);">-ebilmek (Yetenek)</div>
      </div>
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px solid var(--border); text-align:center;">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">SHOULD</div>
        <div style="font-size:11px; color:var(--muted);">-meli (Tavsiye)</div>
      </div>
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px solid var(--border); text-align:center;">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">MUST</div>
        <div style="font-size:11px; color:var(--muted);">-meli (Zorunlu)</div>
      </div>
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px solid var(--border); text-align:center;">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">MIGHT</div>
        <div style="font-size:11px; color:var(--muted);">-ebilir (Ä°htimal)</div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-bottom:14px; padding:0; overflow:hidden; border:1px solid var(--border);">
    <div style="background:var(--card2); padding:10px; font-weight:900; border-bottom:1px solid var(--border); text-align:center;">â“ Soru Kelimeleri (Wh-)</div>
    <table style="width:100%; border-collapse:collapse; font-size:13px; text-align:center;">
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">WHO</td>
        <td style="padding:8px;">Kim?</td>
        <td style="padding:8px; font-style:italic; color:var(--muted);">Who is he?</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">WHAT</td>
        <td style="padding:8px;">Ne?</td>
        <td style="padding:8px; font-style:italic; color:var(--muted);">What is this?</td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:8px; font-weight:bold; color:var(--primary);">WHERE</td>
        <td style="padding:8px;">Nerede?</td>
        <td style="padding:8px; font-style:italic; color:var(--muted);">Where is Ali?</td>
      </tr>
      <tr>
        <td style="padding:8px; font-weight:bold; color:var(--primary);">WHEN</td>
        <td style="padding:8px;">Ne zaman?</td>
        <td style="padding:8px; font-style:italic; color:var(--muted);">When to go?</td>
      </tr>
    </table>
  </div>

  <div class="card" style="margin-bottom:14px;">
    <div style="font-weight:900; color:var(--warn); margin-bottom:10px; text-align:center;">ğŸ A - AN - THE FarkÄ±</div>
    <div class="grid-2">
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px dashed var(--border);">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">A / AN</div>
        <div style="font-size:11px; margin-top:2px; font-weight:bold;">HERHANGÄ° BÄ°R</div>
        <div style="font-size:11px; margin-top:4px; color:var(--muted); line-height:1.4;">
          Bilinmeyen ÅŸey.<br>
          ğŸ‘‰ <b>a</b> car<br>
          ğŸ‘‰ <b>an</b> apple
        </div>
      </div>
      <div style="background:var(--bg); padding:10px; border-radius:12px; border:1px dashed var(--border);">
        <div style="font-weight:bold; color:var(--primary); font-size:16px;">THE</div>
        <div style="font-size:11px; margin-top:2px; font-weight:bold;">BÄ°LÄ°NEN O</div>
        <div style="font-size:11px; margin-top:4px; color:var(--muted); line-height:1.4;">
          KonuÅŸulan ÅŸey.<br>
          ğŸ‘‰ <b>the</b> moon<br>
          ğŸ‘‰ <b>the</b> door
        </div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-bottom:14px; padding:0; overflow:hidden; border:1px solid var(--border);">
    <div style="background:var(--card2); padding:10px; font-weight:900; border-bottom:1px solid var(--border); text-align:center;">ğŸ“ SÄ±fatlar (KarÅŸÄ±laÅŸtÄ±rma)</div>
    <table style="width:100%; border-collapse:collapse; font-size:13px; text-align:center;">
      <tr style="background:color-mix(in srgb, var(--primary) 15%, transparent);">
        <th style="padding:6px;">SÄ±fat</th>
        <th style="padding:6px;">Daha ...</th>
        <th style="padding:6px;">En ...</th>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:6px;">Big</td>
        <td style="padding:6px; font-weight:bold;">Big<span style="color:var(--warn)">ger</span></td>
        <td style="padding:6px; font-weight:bold;">Big<span style="color:var(--warn)">gest</span></td>
      </tr>
      <tr style="border-bottom:1px solid var(--border);">
        <td style="padding:6px;">Good</td>
        <td style="padding:6px; font-weight:bold; color:var(--ok);">Better</td>
        <td style="padding:6px; font-weight:bold; color:var(--ok);">Best</td>
      </tr>
      <tr>
        <td style="padding:6px;">Bad</td>
        <td style="padding:6px; font-weight:bold; color:var(--danger);">Worse</td>
        <td style="padding:6px; font-weight:bold; color:var(--danger);">Worst</td>
      </tr>
    </table>
  </div>

  <button class="btn btnSoft" style="width:100%; margin-top:20px; margin-bottom:20px;" onclick="closeSheets()">Kapat</button>
</div>
Â  <div class="overlay" id="quizOverlay">
  
  <div class="overlayTop">
    <div style="font-weight:980; font-size:18px; display:flex; align-items:center; gap:8px;">
      <span>ğŸ§ </span> Quiz
    </div>
    <button class="iconBtn" style="border:none; background:var(--card2); width:36px; height:36px;" onclick="stopQuiz()">âœ–</button>
  </div>

  <div id="quizBody">
    
    <div class="qCard">
      <div class="smallInfo" style="margin-bottom:10px; display:flex; justify-content:center; gap:12px; font-size:13px;">
        <span>Kalan: <b id="qRemain" style="color:var(--text);">0</b></span>
        <span>âœ… <b id="qCorrect" style="color:var(--ok);">0</b></span>
        <span>âŒ <b id="qWrong" style="color:var(--danger);">0</b></span>
      </div>

      <div id="qWord" style="font-size:32px; font-weight:900; line-height:1.2; margin-bottom:8px;">â€”</div>
      
      <div id="qMeta" style="font-size:14px; color:var(--muted); font-weight:600; margin-bottom:6px;">â€”</div>
      
      <div id="qExample" style="font-size:14px; font-style:italic; color:var(--primary); opacity:0.9; min-height:20px;"></div>
    </div>

    <div id="qChoices" style="display:flex; flex-direction:column; gap:10px; margin-top:4px;"></div>

    <div id="qTyping" style="display:none; gap:10px; margin-top:4px;">
      <input id="qInput" placeholder="AnlamÄ±nÄ± yaz..." style="flex:1; font-weight:bold;" />
      <button class="btn btnPrimary" style="padding:0 20px;" onclick="checkTypingAnswer()">Kontrol</button>
    </div>

    <div id="qReveal" style="text-align:center; min-height:20px; font-weight:bold;"></div>

    <div style="margin-top:auto; padding-top:20px; padding-bottom:30px;">
      <button class="btn btnSoft" style="width:100%; border-color:var(--danger); color:var(--danger);" onclick="markAsUnknown()">ğŸ”´ Bilmiyorum / Pas GeÃ§</button>
      <div class="smallInfo" style="text-align:center; margin-top:12px; opacity:0.5;">
        Ã‡Ä±kmak iÃ§in saÄŸ Ã¼stteki Ã§arpÄ±ya basabilirsin.
      </div>
    </div>

  </div>
</div>

<script>
/* ===========================
Â  Â Storage + helpers
=========================== */
const DB = {
Â  get(key, fallback){ try { return JSON.parse(localStorage.getItem(key)) ?? fallback; } catch { return fallback; } },
Â  set(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
};
function toast(msg){
Â  const t=document.getElementById("toast");
Â  t.textContent=msg;
Â  t.classList.add("show");
Â  setTimeout(()=>t.classList.remove("show"), 2200);
}
function now(){ return Date.now(); }
function norm(s){ return (s||"").toLowerCase().trim(); }
function uid(){ return "c_" + Math.random().toString(36).slice(2) + "_" + Math.random().toString(36).slice(2); }
function safeText(s){ return (s ?? "").toString(); }

/* ===========================
Â  Â State
=========================== */
const themes=["dark","light","ocean","emerald","sunset","rose"];
const state = {
Â  settings: DB.get("lm_settings", { theme:"dark", quizMode:"choice" }), // choice|typing
Â  cards: DB.get("lm_cards", []),
Â  txCache: DB.get("lm_tx_cache", {}),Â  Â  Â  Â  // cache for translations
Â  dictCache: DB.get("lm_dict_cache", {}),Â  Â  // cache for dictionary results (EN)
Â  reviewQueue: DB.get("lm_review_queue", [])
};
function saveAll(){
Â  DB.set("lm_settings", state.settings);
Â  DB.set("lm_cards", state.cards);
Â  DB.set("lm_tx_cache", state.txCache);
Â  DB.set("lm_dict_cache", state.dictCache);
Â  DB.set("lm_review_queue", state.reviewQueue);
}

/* ===========================
Â  Â Theme
=========================== */
function setTheme(name){
Â  document.documentElement.setAttribute("data-theme", name);
Â  state.settings.theme = name;
Â  DB.set("lm_settings", state.settings);
Â  const meta=document.getElementById("meta-theme");
Â  meta.setAttribute("content", getComputedStyle(document.documentElement).getPropertyValue("--bg").trim() || "#0b1220");
Â  const sel=document.getElementById("themeSelect"); if(sel) sel.value=name;
}
function applyThemeFromSelect(){ setTheme(document.getElementById("themeSelect").value); toast("Tema gÃ¼ncellendi"); }
document.getElementById("btnTheme").onclick=()=>{
Â  const idx=(themes.indexOf(state.settings.theme)+1)%themes.length;
Â  setTheme(themes[idx]); toast("Tema: " + themes[idx]);
};
document.getElementById("btnSettings").onclick=()=>{
Â  document.getElementById("themeSelect").value = state.settings.theme;
Â  syncQuizModeLabels();
Â  openSheet("settingsSheet");
};

/* ===========================
Â  Â Router
=========================== */
function go(id){
Â  document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
Â  document.getElementById(id).classList.add("active");
Â  document.querySelectorAll(".navBtn").forEach(b=>b.classList.remove("active"));
Â  if(id==="home") document.getElementById("navHome").classList.add("active");
Â  if(id==="review") document.getElementById("navReview").classList.add("active");
Â  if(id==="cards") document.getElementById("navCards").classList.add("active");
Â  if(id==="home") renderDash();
Â  if(id==="review") renderReview();
Â  if(id==="cards") renderCards();
}

/* ===========================
Â  Â Sheets
=========================== */
const backdrop=document.getElementById("backdrop");
function openSheet(id){ backdrop.classList.add("open"); document.getElementById(id).classList.add("open"); }
function closeSheets(){ backdrop.classList.remove("open"); document.querySelectorAll(".sheet").forEach(s=>s.classList.remove("open")); }
window.addEventListener("keydown",(e)=>{
Â  if(e.key==="Escape"){
Â  Â  if(document.getElementById("quizOverlay").classList.contains("open")) stopQuiz();
Â  Â  else closeSheets();
Â  }
});

/* ===========================
Â  Â ONLINE: Translate (meaning TR)
Â  Â - uses Google translate gtx (works in browser)
=========================== */
/* ===========================
Â  Â 1. GELÄ°ÅMÄ°Å Ã‡EVÄ°RÄ° MOTORU (DetaylÄ± Anlam Ã‡eker)
=========================== */
async function translateToTR(lang, term){
Â  const key = `${lang}|${norm(term)}`;
Â  if(state.txCache[key]) return state.txCache[key];

Â  // Dil ayarÄ± (HÄ±zlÄ± Ã§eviri iÃ§in 'auto' gelirse EN varsayalÄ±m veya Google'a bÄ±rakalÄ±m)
Â  const sl = ({EN:"en", RU:"ru", DE:"de", FR:"fr", ES:"es", TR:"tr"})[lang] || "auto";
Â Â 
Â  // Google API (DetaylÄ± mod: dt=t ana Ã§eviri, dt=bd sÃ¶zlÃ¼k/eÅŸ anlamlÄ±lar)
Â  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sl}&tl=tr&dt=t&dt=bd&q=${encodeURIComponent(term)}`;

Â  try{
Â  Â  const r = await fetch(url);
Â  Â  if(!r.ok) throw new Error("fail");
Â  Â  const data = await r.json();

Â  Â  // 1. Ana Ã‡eviri
Â  Â  let mainMean = (data?.[0]?.[0]?.[0] || "").trim();

Â  Â  // 2. DetaylÄ± Anlamlar (Varsa: Ä°sim, Fiil kategorileri)
Â  Â  let extraMeans = [];
Â  Â  if(data[1]){
Â  Â  Â  data[1].forEach(group => {
Â  Â  Â  Â  const pos = group[0]; // tÃ¼r (noun/verb)
Â  Â  Â  Â  // O tÃ¼rdeki ilk 5 anlamÄ± alÄ±p birleÅŸtir
Â  Â  Â  Â  const words = group[1].slice(0, 5).join(", ");Â 
Â  Â  Â  Â  extraMeans.push(`[${pos}]: ${words}`);
Â  Â  Â  });
Â  Â  }

Â  Â  // Hepsini birleÅŸtir
Â  Â  let finalResult = mainMean;
Â  Â  if(extraMeans.length > 0){
Â  Â  Â  // Alt satÄ±ra detaylarÄ± ekle
Â  Â  Â  finalResult = mainMean + "\n\n(" + extraMeans.join(") \n(") + ")";
Â  Â  }

Â  Â  // HafÄ±zaya kaydet ve dÃ¶ndÃ¼r
Â  Â  state.txCache[key] = finalResult;
Â  Â  DB.set("lm_tx_cache", state.txCache);
Â  Â  return finalResult;

Â  }catch(e){
Â  Â  console.log(e);
Â  Â  return "";Â 
Â  }
}

/* ===========================
Â  Â 2. HIZLI Ã‡EVÄ°RÄ° BUTONU MANTIÄI
=========================== */
let quickTermCache = ""; // Karta eklerken kullanmak iÃ§in

async function doQuickTranslate(){
Â  const input = document.getElementById("quickTransInput");
Â  if(!input) return; // Kutu yoksa dur
Â Â 
Â  const term = input.value.trim();
Â  if(!term) return toast("LÃ¼tfen bir kelime yazÄ±n.");

Â  toast("Ã‡evriliyor... â³");
Â Â 
Â  // 1. Google'dan detaylÄ± anlamÄ± Ã§ek (VarsayÄ±lan EN gÃ¶nderiyoruz, Google dili anlar)
Â  const meaning = await translateToTR("EN", term);
Â Â 
Â  // 2. Ä°ngilizce SÃ¶zlÃ¼k verisi (Sadece harflerden oluÅŸuyorsa bak)
Â  let dictInfo = "";
Â  if(term.match(/^[a-zA-Z\s]+$/)){
Â  Â  Â const dict = await lookupEN(term);
Â  Â  Â if(dict){
Â  Â  Â  Â dictInfo = `
Â  Â  Â  Â <div style="margin-top:15px; padding:12px; background:var(--card2); border-radius:12px; border:1px solid var(--border);">
Â  Â  Â  Â  Â <div style="font-weight:bold; color:var(--muted); margin-bottom:4px;">ğŸ‡¬ğŸ‡§ Ä°ngilizce SÃ¶zlÃ¼k:</div>
Â  Â  Â  Â  Â <div style="font-style:italic;">${dict.type}</div>
Â  Â  Â  Â  Â <div style="margin-top:4px;">${dict.definitionEN}</div>
Â  Â  Â  Â  Â <div style="color:var(--primary); margin-top:6px; font-weight:500;">"${dict.exampleEN}"</div>
Â  Â  Â  Â </div>`;
Â  Â  Â }
Â  }

Â  // 3. SonuÃ§ ekranÄ±nÄ± hazÄ±rla
Â  const content = `
Â  Â  <div style="font-size:28px; font-weight:900; color:var(--primary); text-align:center; margin-bottom:10px;">${term}</div>
Â  Â  <div style="font-size:16px; line-height:1.5; white-space:pre-wrap; background:var(--card); padding:12px; border-radius:12px; border:1px solid var(--border);">${meaning}</div>
Â  Â  ${dictInfo}
Â  `;

Â  // 4. Pencereyi aÃ§
Â  document.getElementById("trResContent").innerHTML = content;
Â  quickTermCache = term;Â 
Â  openSheet("transResultSheet");Â 
Â  input.value = ""; // Kutuyu temizle
}

// "Bu Kelimeyi Karta Ekle" butonuna basÄ±nca Ã§alÄ±ÅŸÄ±r
function copyToManualAdd(){
Â  closeSheets(); // SonuÃ§ penceresini kapat
Â  openManualAdd(); // Ekleme penceresini aÃ§
Â Â 
Â  // Kelimeyi kutuya yaz
Â  document.getElementById("maTerm").value = quickTermCache;
Â Â 
Â  // Otomatik doldurmayÄ± tetikle
Â  autoFillManualFields(true);
}

/* ===========================
Â  Â ONLINE: Dictionary (EN only)
Â  Â - dictionaryapi.dev returns meanings/partOfSpeech/examples
=========================== */
function mapPosToType(pos){
Â  const p=(pos||"").toLowerCase();
Â  if(p==="noun") return "noun";
Â  if(p==="verb") return "verb";
Â  if(p==="adjective") return "adj";
Â  if(p==="adverb") return "adv";
Â  if(p==="phrasal verb") return "phrasal";
Â  if(p==="idiom") return "idiom";
Â  return "word";
}

async function lookupEN(term){
Â  const k = norm(term);
Â  if(!k) return null;
Â  if(state.dictCache[k]) return state.dictCache[k];

Â  const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(k)}`;
Â  try{
Â  Â  const r = await fetch(url);
Â  Â  if(!r.ok) throw new Error("dict_fail");
Â  Â  const data = await r.json();

Â  Â  // pick first meaning/definition/example
Â  Â  let pos="", def="", ex="";
Â  Â  const meanings = data?.[0]?.meanings || [];
Â  Â  for(const m of meanings){
Â  Â  Â  if(!pos && m.partOfSpeech) pos = m.partOfSpeech;
Â  Â  Â  const defs = m.definitions || [];
Â  Â  Â  for(const d of defs){
Â  Â  Â  Â  if(!def && d.definition) def = d.definition;
Â  Â  Â  Â  if(!ex && d.example) ex = d.example;
Â  Â  Â  Â  if(def && ex) break;
Â  Â  Â  }
Â  Â  Â  if(def && ex) break;
Â  Â  }

Â  Â  const result = {
Â  Â  Â  pos: pos || "",
Â  Â  Â  type: mapPosToType(pos),
Â  Â  Â  definitionEN: def || "",
Â  Â  Â  exampleEN: ex || ""
Â  Â  };
Â  Â  state.dictCache[k] = result;
Â  Â  DB.set("lm_dict_cache", state.dictCache);
Â  Â  return result;
Â  }catch(e){
Â  Â  return null;
Â  }
}

/* ===========================
Â  Â Example generator (fallback)
=========================== */
function genExample(term, lang, type){
Â  const t = term.trim();
Â  if(!t) return "";
Â  if(lang==="EN"){
Â  Â  if(type==="verb") return `Workers ${t} the elements according to the drawing.`;
Â  Â  if(type==="noun") return `The ${t} was checked during inspection.`;
Â  Â  if(type==="adj") return `The structure remained ${t} under the design load.`;
Â  Â  if(type==="adv") return `The crew worked ${t} to finish before sunset.`;
Â  Â  if(type==="phrase") return `We reviewed "${t}" before starting the work.`;
Â  Â  return `We used "${t}" in the daily site report.`;
Â  }
Â  return `(${lang}) ${t} â€” Ã¶rnek cÃ¼mle (istersen dÃ¼zenle).`;
}

function inferTypeBasic(term){
Â  if(term.includes(" ")) return "phrase";
Â  return "word";
}

/* ===========================
Â  Â SRS (SM-2 style)
=========================== */
/* ===========================
   3 SEVÄ°YELÄ° SRS MOTORU
   - Bilmiyorum: SÄ±fÄ±rlar (Hemen tekrar etmeli)
   - Ã–ÄŸreniyorum: Normal ilerler
   - Ã–ÄŸrendim: HÄ±zlÄ± ilerler (Daha geÃ§ sorar)
=========================== */
function srsCalc(card, quality){
  // quality: 0 (Bilmiyorum), 3 (Ã–ÄŸreniyorum), 5 (Ã–ÄŸrendim)
  let s = card.srs || { interval:0, reps:0, ef:2.5 };
  let { interval, reps, ef } = s;

  if(quality === 0){
     // BÄ°LMÄ°YORUM: KartÄ± sÄ±fÄ±rla, hemen "Tekrar" listesine at
     reps = 0;
     interval = 0; // Hemen (Åimdi)
     // EF deÄŸerini biraz dÃ¼ÅŸÃ¼r (zorlandÄ±k)
     ef = Math.max(1.3, ef - 0.2);
  } 
  else {
     // Ã–ÄRENÄ°YORUM (3) veya Ã–ÄRENDÄ°M (5)
     if(reps === 0) interval = 1;
     else if(reps === 1) interval = 6;
     else interval = Math.round(interval * ef);

     // Ã–ÄŸrendim (5) dediysek ekstra bonus ver (daha ileri at)
     if(quality === 5) interval = Math.round(interval * 1.3);

     reps++;
     
     // SuperMemo-2 formÃ¼lÃ¼
     // q=5 ise EF artar (kolaylaÅŸÄ±r), q=3 ise EF hafif azalÄ±r
     ef = ef + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
     if(ef < 1.3) ef = 1.3;
  }

  // Yeni tarih hesapla
  // interval gÃ¼n cinsinden, milisaniyeye Ã§eviriyoruz
  // EÄŸer interval 0 ise (bilmiyorum), due = ÅŸimdi olur.
  return { due: Date.now() + (interval * 24 * 60 * 60 * 1000), srs:{interval,reps,ef} };
}

/* ===========================
Â  Â Dash + Review
=========================== */
function renderDash(){
Â  document.getElementById("dashTotal").textContent = state.cards.length;
Â  document.getElementById("dashDue").textContent = state.cards.filter(c => (c.due||0) <= now()).length;
}
function getDueCards(){ return state.cards.filter(c => (c.due||0) <= now()); }
function renderReview(){
Â  document.getElementById("rvTotal").textContent = state.cards.length;
Â  document.getElementById("rvDue").textContent = getDueCards().length;
Â  syncQuizModeLabels();
}
function resetTodaysQueue(){
Â  // 1. Vakti gelen (Due) kartlarÄ± bul
Â  let due = getDueCards();
Â  let q = [];

Â  if(due.length > 0) {
Â  Â  // Vakti gelenleri RASTGELE karÄ±ÅŸtÄ±r (Shuffle)
Â  Â  q = due.sort(() => Math.random() - 0.5).map(c => c.id);
Â  } else {
Â  Â  // Vakti gelen yoksa, tÃ¼m havuzdan RASTGELE 30 tane seÃ§
Â  Â  q = [...state.cards]
Â  Â  Â  Â  .sort(() => Math.random() - 0.5)
Â  Â  Â  Â  .slice(0, Math.min(30, state.cards.length))
Â  Â  Â  Â  .map(c => c.id);
Â  }

Â  state.reviewQueue = q;
Â  DB.set("lm_review_queue", state.reviewQueue);
Â Â 
Â  // KullanÄ±cÄ±ya bilgi ver
Â  toast("Kuyruk karÄ±ÅŸtÄ±rÄ±ldÄ± ğŸ”€");
Â  renderReview();
}
function clearProgress(){
Â  if(!confirm("SRS sÄ±fÄ±rlansÄ±n mÄ±? (Kartlar silinmez)")) return;
Â  state.cards = state.cards.map(c=>({...c,due:now(),srs:{interval:0,reps:0,ef:2.5},updatedAt:now()}));
Â  DB.set("lm_cards", state.cards);
Â  toast("SRS sÄ±fÄ±rlandÄ± âœ…");
Â  renderDash(); renderReview(); renderCards();
}

/* ===========================
   AKILLI KART LÄ°STELEME & FÄ°LTRELEME
   - Ä°statistik kutularÄ±na tÄ±klayÄ±nca listeyi sÃ¼zer.
   - SayÄ±larÄ± anlÄ±k gÃ¼nceller.
=========================== */
let activeFilter = "all"; // Hangi filtre seÃ§ili? (all, new, learning, mastered)

// Arama kutusuna yazÄ±nca Ã§alÄ±ÅŸÄ±r (EÄŸer hata verirse bu satÄ±rÄ± silip en alta ekleyebilirsin)
const searchInput = document.getElementById("search");
if(searchInput) searchInput.addEventListener("input", renderCards);

// Kutulara tÄ±klayÄ±nca Ã§alÄ±ÅŸÄ±r (Filtreyi aÃ§/kapa)
function toggleFilter(type){
  if(activeFilter === type){
     activeFilter = "all"; // Zaten seÃ§iliyse filtreyi kaldÄ±r (Hepsini gÃ¶ster)
     toast("TÃ¼m kartlar gÃ¶steriliyor");
  } else {
     activeFilter = type; // Yeni filtreyi seÃ§
     if(type === 'new') toast("Sadece YENÄ° kartlar");
     if(type === 'learning') toast("Sadece Ã–ÄRENÄ°LEN kartlar");
     if(type === 'mastered') toast("Sadece Ã–ÄRENÄ°LMÄ°Å kartlar");
  }
  renderCards(); // Listeyi yenile
}

function renderCards(){
  // Hata Ã¶nleyici: EÄŸer search kutusu yoksa boÅŸ string al
  const searchEl = document.getElementById("search");
  const q = searchEl ? norm(searchEl.value) : "";
  
  const list = document.getElementById("cardsList");
  if(!list) return; // Liste yoksa dur
  
  list.innerHTML="";

  // --- 1. Ä°STATÄ°STÄ°KLERÄ° SAY (Her zaman tÃ¼m kartlar Ã¼zerinden) ---
  let countNew = 0;       
  let countLearning = 0;  
  let countMastered = 0;  

  if(state.cards){
      state.cards.forEach(c => {
          const r = c.srs ? c.srs.reps : 0;
          if(r === 0) countNew++;
          else if(r < 5) countLearning++;
          else countMastered++;
      });
  }

  // SayÄ±larÄ± kutulara yaz (EÄŸer kutular ekranda varsa)
  if(document.getElementById("statNew")) document.getElementById("statNew").textContent = countNew;
  if(document.getElementById("statLearn")) document.getElementById("statLearn").textContent = countLearning;
  if(document.getElementById("statMaster")) document.getElementById("statMaster").textContent = countMastered;

  // --- 2. KUTULARIN GÃ–RÃœNÃœMÃœNÃœ GÃœNCELLE (SeÃ§ili olan parlasÄ±n) ---
  const btnNew = document.getElementById("filterBtnNew");
  const btnLearn = document.getElementById("filterBtnLearn");
  const btnMaster = document.getElementById("filterBtnMaster");

  // SeÃ§ili olmayanÄ± silikleÅŸtir (Opacity ayarÄ±)
  if(btnNew) btnNew.style.opacity = (activeFilter === 'all' || activeFilter === 'new') ? "1" : "0.4";
  if(btnLearn) btnLearn.style.opacity = (activeFilter === 'all' || activeFilter === 'learning') ? "1" : "0.4";
  if(btnMaster) btnMaster.style.opacity = (activeFilter === 'all' || activeFilter === 'mastered') ? "1" : "0.4";
  
  // SeÃ§ili olana kalÄ±n kenarlÄ±k ver
  if(btnNew) btnNew.style.borderWidth = (activeFilter === 'new') ? "2px" : "1px";
  if(btnLearn) btnLearn.style.borderWidth = (activeFilter === 'learning') ? "2px" : "1px";
  if(btnMaster) btnMaster.style.borderWidth = (activeFilter === 'mastered') ? "2px" : "1px";

  // --- 3. LÄ°STEYÄ° FÄ°LTRELE ---
  const items = state.cards
    .filter(c => {
      // A) Arama Filtresi
      const matchesSearch = !q || (norm(c.term).includes(q) || norm(c.meaning).includes(q) || norm(c.type).includes(q));
      
      // B) Durum Filtresi (Kutulara tÄ±klama)
      const r = c.srs ? c.srs.reps : 0;
      let matchesStatus = true;
      
      if(activeFilter === 'new') matchesStatus = (r === 0);
      else if(activeFilter === 'learning') matchesStatus = (r > 0 && r < 5);
      else if(activeFilter === 'mastered') matchesStatus = (r >= 5);
      
      return matchesSearch && matchesStatus;
    })
    .sort((a,b)=> (a.term||"").localeCompare((b.term||""), "en"));

  // --- 4. SONUCU BAS ---
  if(!items.length){
    let msg = "Kart bulunamadÄ±.";
    if(activeFilter === 'new') msg = "HenÃ¼z YENÄ° kart yok.";
    if(activeFilter === 'learning') msg = "Åu an Ã–ÄRENÄ°LEN kart yok.";
    if(activeFilter === 'mastered') msg = "HenÃ¼z tamamlanan kart yok.";
    
    list.innerHTML=`<div class="card" style="text-align:center; padding:20px; color:var(--muted);">${msg}</div>`;
    return;
  }

  items.forEach(c=>{
    const isDue = (c.due||0) <= Date.now();
    const reps = c.srs ? c.srs.reps : 0;
    
    // Rozet Rengi (Listede durumunu gÃ¶rmek iÃ§in)
    let statusBadge = "";
    if(reps === 0) statusBadge = `<span class="badge" style="border:1px solid var(--border);">Yeni</span>`;
    else if(reps < 5) statusBadge = `<span class="badge" style="color:var(--warn); border-color:var(--warn);">Ã–ÄŸreniliyor</span>`;
    else statusBadge = `<span class="badge" style="color:var(--ok); border-color:var(--ok); background:color-mix(in srgb, var(--ok) 10%, transparent);">Ã–ÄŸrenildi</span>`;

    const dueBadge = isDue ? `<span class="badge due" style="margin-left:4px;">Tekrar</span>` : ``;

    const el=document.createElement("div");
    el.className="card";
    el.style.marginTop="12px";
    el.innerHTML=`
      <div class="cardLine">
        <div class="termBig">${safeText(c.term)}</div>
        <div style="display:flex;">${statusBadge} ${dueBadge}</div>
      </div>
      <div class="smallInfo">${safeText(c.lang)} â€¢ ${safeText(c.meaning)}</div>
      <div class="smallInfo" style="margin-top:6px;">TÃ¼r: ${safeText(c.type||'-')}</div>
      <div class="smallInfo" style="margin-top:6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; opacity:0.7;">
        ${safeText(c.example||'')}
      </div>
      <div class="two" style="margin-top:10px;">
        <button class="btn btnSoft btnHalf" data-edit="${c.id}">DÃ¼zenle</button>
        <button class="btn btnDanger btnHalf" data-del="${c.id}">Sil</button>
      </div>
    `;
    el.querySelector(`[data-edit="${c.id}"]`).onclick=()=>openEditPrompt(c.id);
    el.querySelector(`[data-del="${c.id}"]`).onclick=()=>deleteCard(c.id);
    list.appendChild(el);
  });
}

/* ===========================
Â  Â Manual Add (ONLINE AUTOFILL)
=========================== */
let autoTimer=null;
function openManualAdd(){
Â  clearManual();
Â  openSheet("manualAddSheet");
}
function clearManual(){
Â  document.getElementById("maLang").value="EN";
Â  document.getElementById("maTerm").value="";
Â  document.getElementById("maMeaning").value="";
Â  document.getElementById("maType").value="word";
Â  document.getElementById("maExample").value="";
Â  document.getElementById("maNote").value="";
Â  document.getElementById("maHint").textContent="YazÄ±nca otomatik doldurur. Ä°nternet ÅŸart.";
}
document.getElementById("maTerm").addEventListener("input", ()=>{
Â  clearTimeout(autoTimer);
Â  autoTimer=setTimeout(()=>autoFillManualFields(false), 450);
});
document.getElementById("maLang").addEventListener("change", ()=>{
Â  clearTimeout(autoTimer);
Â  autoTimer=setTimeout(()=>autoFillManualFields(false), 250);
});
document.getElementById("maTerm").addEventListener("keydown",(e)=>{
Â  if(e.key==="Enter"){
Â  Â  e.preventDefault();
Â  Â  autoFillManualFields(true);
Â  }
});

async function autoFillManualFields(force){
Â  const lang=document.getElementById("maLang").value;
Â  const term=document.getElementById("maTerm").value.trim();
Â  if(!term) return;

Â  document.getElementById("maHint").textContent="Dolduruluyorâ€¦";

Â  // TYPE + EXAMPLE (try dictionary for EN)
Â  let type = document.getElementById("maType").value;
Â  let example = document.getElementById("maExample").value.trim();
Â  let meaning = document.getElementById("maMeaning").value.trim();

Â  // EN dictionary
Â  if(lang==="EN"){
Â  Â  const dict = await lookupEN(term);
Â  Â  if(dict){
Â  Â  Â  if((!type || type==="word" || force) && dict.type) type = dict.type;
Â  Â  Â  // Prefer dictionary example
Â  Â  Â  if((!example || force) && dict.exampleEN) example = dict.exampleEN;
Â  Â  Â  // If no example in dict, generate
Â  Â  Â  if((!example || force) && !dict.exampleEN) example = genExample(term, lang, type);
Â  Â  }else{
Â  Â  Â  if((!type || type==="word") && (force || !type)) type = inferTypeBasic(term);
Â  Â  Â  if((!example || force) && !example) example = genExample(term, lang, type);
Â  Â  }
Â  }else{
Â  Â  // non-EN: basic type + template example
Â  Â  if((!type || type==="word" || force)) type = inferTypeBasic(term);
Â  Â  if((!example || force)) example = genExample(term, lang, type);
Â  }

Â  // MEANING: always translate to TR
Â  if((!meaning || force)){
Â  Â  const tr = await translateToTR(lang, term);
Â  Â  if(tr) meaning = tr;
Â  }

Â  document.getElementById("maType").value = type || "word";
Â  document.getElementById("maExample").value = example || "";
Â  document.getElementById("maMeaning").value = meaning || "";

Â  if(!meaning){
Â  Â  document.getElementById("maHint").textContent="Anlam alÄ±namadÄ± (internet/translate engeli olabilir).";
Â  }else{
Â  Â  document.getElementById("maHint").textContent="Otomatik dolduruldu âœ… (istersen dÃ¼zenle)";
Â  }
}

function saveManualCard(){
Â  const lang=document.getElementById("maLang").value;
Â  const term=document.getElementById("maTerm").value.trim();
Â  const meaning=document.getElementById("maMeaning").value.trim();
Â  const type=document.getElementById("maType").value;
Â  const example=document.getElementById("maExample").value.trim();
Â  const note=document.getElementById("maNote").value.trim();

Â  if(!term) return toast("Kelime boÅŸ olamaz.");
Â  if(!meaning) return toast("Anlam boÅŸ olamaz (doldur/manuel gir).");

Â  const dupe = state.cards.find(c => norm(c.term)===norm(term) && (c.lang||"EN")===lang);
Â  if(dupe){
Â  Â  if(confirm("Bu kelime zaten var. GÃ¼ncellensin mi?")){
Â  Â  Â  dupe.meaning=meaning;
Â  Â  Â  dupe.type=type;
Â  Â  Â  dupe.example=example;
Â  Â  Â  dupe.note=note;
Â  Â  Â  dupe.updatedAt=now();
Â  Â  Â  DB.set("lm_cards", state.cards);
Â  Â  Â  toast("GÃ¼ncellendi âœ…");
Â  Â  Â  closeSheets(); renderDash(); renderReview(); renderCards();
Â  Â  }
Â  Â  return;
Â  }

Â  state.cards.push({
Â  Â  id:uid(),
Â  Â  lang, term, meaning, type, example, note,
Â  Â  due: now(),
Â  Â  srs:{interval:0,reps:0,ef:2.5},
Â  Â  createdAt: now(),
Â  Â  updatedAt: now()
Â  });
Â  DB.set("lm_cards", state.cards);
Â  toast("Eklendi âœ…");
Â  closeSheets(); renderDash(); renderReview(); renderCards();
}

function deleteCard(id){
Â  if(!confirm("Silinsin mi?")) return;
Â  state.cards = state.cards.filter(c=>c.id!==id);
Â  DB.set("lm_cards", state.cards);
Â  state.reviewQueue = (state.reviewQueue||[]).filter(x=>x!==id);
Â  DB.set("lm_review_queue", state.reviewQueue);
Â  toast("Silindi");
Â  renderDash(); renderReview(); renderCards();
}

/* Simple edit prompt (keep UI minimal) */
function openEditPrompt(id){
Â  const c = state.cards.find(x=>x.id===id);
Â  if(!c) return;
Â  const newMeaning = prompt("Anlam (TR):", c.meaning || "");
Â  if(newMeaning===null) return;
Â  const newType = prompt("TÃ¼r (noun/verb/adj/adv/phrase/wordâ€¦):", c.type || "word");
Â  if(newType===null) return;
Â  const newExample = prompt("Ã–rnek cÃ¼mle:", c.example || "");
Â  if(newExample===null) return;

Â  c.meaning = newMeaning.trim();
Â  c.type = (newType||"word").trim();
Â  c.example = (newExample||"").trim();
Â  c.updatedAt = now();
Â  DB.set("lm_cards", state.cards);
Â  toast("GÃ¼ncellendi âœ…");
Â  renderCards();
}

/* ===========================
Â  Â Quiz
=========================== */
function getQuizMode(){ return state.settings.quizMode || "choice"; }
function syncQuizModeLabels(){
Â  const label=(getQuizMode()==="typing")?"YazmalÄ±":"SeÃ§meli";
Â  document.getElementById("quizModeLabel").textContent=label;
Â  document.getElementById("quizModeLabel2").textContent=label;
}
function toggleQuizMode(){
Â  state.settings.quizMode = (getQuizMode()==="choice") ? "typing" : "choice";
Â  DB.set("lm_settings", state.settings);
Â  syncQuizModeLabels();
Â  toast("Quiz modu: " + ((getQuizMode()==="typing")?"YazmalÄ±":"SeÃ§meli"));
}
let quizCurrent=null;
let correctCount=0, wrongCount=0;
/* ===========================
   GÃœVENLÄ° TEKRAR BAÅLATMA (KARIÅTIRMALI)
   - 5-10-15 seÃ§ince hep aynÄ±larÄ± gelmesin diye karÄ±ÅŸtÄ±rÄ±r.
=========================== */
function startReviewQuiz(limit = 9999, btnElement = null){
  // 1. GÃ¶rsel Efekt (Buton Rengi)
  if(btnElement){
     const container = document.getElementById("limitContainer");
     if(container){
        container.querySelectorAll(".btn").forEach(b => {
           b.classList.remove("btnPrimary"); 
           b.classList.add("btnSoft"); 
        });
     }
     btnElement.classList.remove("btnSoft");
     btnElement.classList.add("btnPrimary");
  }

  try {
    if(!state || !state.cards) return toast("Kart verisi yok!");
    if(typeof closeSheets === "function") closeSheets();

    const now = Date.now();
    let dueCards = state.cards.filter(c => (c.due || 0) <= now);

    // --- DEÄÄ°ÅÄ°KLÄ°K BURADA: Ã–NCE KARIÅTIR ---
    // EÄŸer kart varsa, tarihine bakmaksÄ±zÄ±n Ã¶nce bir karÄ±ÅŸtÄ±r ki hep aynÄ±larÄ± gelmesin
    if(dueCards.length > 0){
       dueCards.sort(() => Math.random() - 0.5);
    } else {
       // HiÃ§ kart yoksa rastgele pratik iÃ§in tÃ¼m havuzu karÄ±ÅŸtÄ±r
       dueCards = [...state.cards].sort(() => Math.random() - 0.5);
    }

    // LÄ°MÄ°T UYGULA
    if(dueCards.length > limit){
       dueCards = dueCards.slice(0, limit);
    }

    state.reviewQueue = dueCards.map(c => c.id);
    DB.set("lm_review_queue", state.reviewQueue);

    if(state.reviewQueue.length === 0) return toast("Ã‡alÄ±ÅŸÄ±lacak kart yok!");

    const overlay = document.getElementById("quizOverlay");
    if(overlay) {
        overlay.classList.remove("active");
        overlay.classList.add("open");
    }
    
    if(typeof nextQuiz === "function") nextQuiz();

  } catch(err) {
    alert("Hata: " + err.message);
  }
}
function openQuizOverlay(){
Â  document.getElementById("quizOverlay").classList.add("open");
Â  document.getElementById("qInput").onkeydown=(e)=>{
Â  Â  if(e.key==="Enter"){ e.preventDefault(); checkTypingAnswer(); }
Â  };
}
function stopQuiz(){
Â  // --- DÃœZELTME BAÅLANGICI ---
Â  // EÄŸer ekranda aktif bir soru varken Ã§Ä±kÄ±ÅŸ yapÄ±lÄ±yorsa,
Â  // o soruyu kuyruÄŸun EN BAÅINA geri ekle (bÃ¶ylece sayÄ± dÃ¼ÅŸmez)
Â  if(quizCurrent && quizCurrent.id){
Â  Â  Â state.reviewQueue.unshift(quizCurrent.id);
Â  Â  Â DB.set("lm_review_queue", state.reviewQueue);
Â  }
Â  // --- DÃœZELTME BÄ°TÄ°ÅÄ° ---

Â  document.getElementById("quizOverlay").classList.remove("open");
Â  quizCurrent=null;
Â  renderDash(); renderReview();
}
function updateQuizRemain(){
Â  document.getElementById("qRemain").textContent=String(state.reviewQueue.length);
}

/* ===========================
   GELÄ°ÅMÄ°Å QUIZ ARAYÃœZÃœ
   - DoÄŸru bilinirse: "Ã–ÄŸrendim" veya "Ã–ÄŸreniyorum" seÃ§tirir.
   - YanlÄ±ÅŸ bilinirse: Otomatik "Bilmiyorum" sayar.
   - GeÃ§ butonu: "Bilmiyorum" sayar ve sÄ±radakine geÃ§er.
=========================== */
function nextQuiz(){
  if(!state.reviewQueue.length){
    toast("Tebrikler! Oturum bitti ğŸ‰");
    stopQuiz();
    return;
  }
  updateQuizRemain();
  
  const id = state.reviewQueue.shift();
  DB.set("lm_review_queue", state.reviewQueue);
  
  const card = state.cards.find(c => c.id === id);
  if(!card) return nextQuiz(); // Kart silinmiÅŸse sonrakine geÃ§

  quizCurrent = card;

  // --- SORU TÄ°PÄ° ---
  let isContextMode = false;
  let questionHtml = "";
  let hintText = "";
  let explanationHtml = "";
  
  // Context (CÃ¼mle) Modu KontrolÃ¼
  if(card.example && card.example.length > 5) {
     const termRegex = new RegExp(`\\b${card.term}\\b`, "gi"); 
     const blankStyle = `<span style='color:var(--primary); border-bottom:3px solid var(--primary); font-weight:bold;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>`;
     const hiddenExample = card.example.replace(termRegex, blankStyle);
     
     if(hiddenExample !== card.example){
        isContextMode = true; 
        questionHtml = hiddenExample; 
        hintText = "BoÅŸluÄŸa hangisi gelmeli?";
        explanationHtml = `<div style="margin-top:20px; font-size:16px; color:var(--muted); font-style:italic;">ğŸ‡¹ğŸ‡· Ä°pucu: "${card.meaning}"</div>`;
     }
  }

  // Klasik Mod
  if(!isContextMode) {
     questionHtml = `<span style="font-size:36px; color:var(--primary);">${card.term}</span>`;
     hintText = "Bu kelimenin anlamÄ± nedir?";
     if(card.example && card.example.length > 5){
        const termRegex = new RegExp(`\\b${card.term}\\b`, "gi");
        const hiddenInExample = card.example.replace(termRegex, "___");
        explanationHtml = `<div style="margin-top:20px; font-size:16px; color:var(--text); opacity:0.8;">ğŸ‡¬ğŸ‡§ Ã–rnek: "${hiddenInExample}"</div>`;
     } else {
        explanationHtml = `<div style="margin-top:20px; font-size:14px; color:var(--muted);">(Ã–rnek cÃ¼mle yok)</div>`;
     }
  }

  // EKRANA YAZ
  const qWordEl = document.getElementById("qWord");
  qWordEl.innerHTML = `<div>${questionHtml}</div>${explanationHtml}`;
  
  if(qWordEl.innerText.length > 80) qWordEl.style.fontSize = "20px";
  else if(!isContextMode) qWordEl.style.fontSize = "28px";
  else qWordEl.style.fontSize = "24px";

  document.getElementById("qMeta").textContent = hintText;
  document.getElementById("qExample").textContent = ""; 
  document.getElementById("qReveal").innerHTML = ""; // Temizle

  // ÅIKLARI HAZIRLA
  const choicesBox = document.getElementById("qChoices");
  const typingBox = document.getElementById("qTyping");
  choicesBox.innerHTML = "";
  typingBox.style.display = "none";
  choicesBox.style.display = "flex";

  // ÅÄ±klarÄ± Ã¼ret (DoÄŸru + 3 YanlÄ±ÅŸ)
  let options = [];
  let correctVal = isContextMode ? card.term : card.meaning;
  
  const distractors = state.cards
      .filter(c => c.id !== card.id)
      .sort(() => Math.random() - 0.5)
      .slice(0, 3)
      .map(x => isContextMode ? x.term : x.meaning);
      
  options = [...distractors, correctVal].sort(() => Math.random() - 0.5);

  options.forEach(opt => {
      const b = document.createElement("button");
      b.className = "qChoice";
      b.textContent = opt; 
      b.onclick = () => {
        // TÃ¼m ÅŸÄ±klarÄ± kilitle
        document.querySelectorAll(".qChoice").forEach(x => x.disabled = true);
        
        if(opt === correctVal){
          // DOÄRU BÄ°LÄ°NDÄ°
          b.classList.add("correct");
          
          if(isContextMode){
             const completedHtml = card.example.replace(new RegExp(`\\b${card.term}\\b`, "gi"), `<span style='color:var(--ok); font-weight:900;'>${card.term}</span>`);
             qWordEl.innerHTML = `<div>${completedHtml}</div>${explanationHtml}`;
          }
          
          // --- YENÄ° KISIM: ZORLUK SEÃ‡Ä°MÄ° BUTONLARI ---
          // KullanÄ±cÄ±ya soruyoruz: Tam Ã¶ÄŸrendin mi yoksa hala Ã§alÄ±ÅŸÄ±yor musun?
          document.getElementById("qReveal").innerHTML = `
            <div style="font-weight:bold; color:var(--ok); margin-bottom:8px;">âœ… DoÄŸru! Ne kadar rahattÄ±n?</div>
            <div style="display:flex; gap:10px;">
              <button class="btn btnSoft btnHalf" onclick="grade(state.cards.find(c=>c.id=='${card.id}'), 3, true)">ğŸŸ¡ Ã–ÄŸreniyorum</button>
              <button class="btn btnOk btnHalf" onclick="grade(state.cards.find(c=>c.id=='${card.id}'), 5, true)">ğŸŸ¢ Tam Ã–ÄŸrendim</button>
            </div>
          `;
          
          // Otomatik geÃ§iÅŸi iptal et, kullanÄ±cÄ± butona basÄ±nca geÃ§ecek
        } else {
          // YANLIÅ BÄ°LÄ°NDÄ°
          b.classList.add("wrong");
          // DoÄŸru ÅŸÄ±kkÄ± gÃ¶ster
          document.querySelectorAll(".qChoice").forEach(btn => { if(btn.textContent === correctVal) btn.classList.add("correct"); });
          
          if(isContextMode) document.getElementById("qExample").textContent = `DoÄŸrusu: ${card.term}`;
          
          // YanlÄ±ÅŸ bilinince direkt "Bilmiyorum" olarak iÅŸaretle ve geÃ§
          grade(card, 0, false);
        }
      };
      choicesBox.appendChild(b);
  });
}
function normalizeAnswer(a){
Â  return norm(a).replace(/[.,!?;:"(){}\[\]<>]/g,"").replace(/\s+/g," ").trim();
}
function checkTypingAnswer(){
Â  if(!quizCurrent) return;
Â  const typed = normalizeAnswer(document.getElementById("qInput").value);
Â  if(!typed) return toast("Bir cevap yazÄ±n.");
Â Â 
Â  // ArtÄ±k kontrol ettiÄŸimiz ÅŸey KELÄ°MENÄ°N KENDÄ°SÄ° (term)
Â  const correct = normalizeAnswer(quizCurrent.term);
Â Â 
Â  const ok = (typed === correct);
Â Â 
Â  if(ok){
Â  Â  document.getElementById("qReveal").textContent = "âœ… DoÄŸru!";
Â  Â  document.getElementById("qExample").textContent = quizCurrent.example;Â 
Â  Â  grade(quizCurrent, 5, true);
Â  } else {
Â  Â  document.getElementById("qReveal").textContent = `âŒ DoÄŸrusu: ${quizCurrent.term}`;
Â  Â  document.getElementById("qExample").textContent = quizCurrent.example;
Â  Â  grade(quizCurrent, 2, false);
Â  }
}
function grade(card, quality, isCorrect){
  // Ä°statistik gÃ¼ncelle
  if(isCorrect){ 
      correctCount++; 
      document.getElementById("qCorrect").textContent=String(correctCount); 
  } else { 
      wrongCount++; 
      document.getElementById("qWrong").textContent=String(wrongCount); 
  }

  // KartÄ± gÃ¼ncelle
  const upd = srsCalc(card, quality);
  card.due = upd.due;
  card.srs = upd.srs;
  card.updatedAt = Date.now();
  DB.set("lm_cards", state.cards);

  // 550ms bekleyip diÄŸer soruya geÃ§
  setTimeout(()=>{ 
      quizCurrent=null; 
      nextQuiz(); 
  }, 550);
}

// "BÄ°LMÄ°YORUM / GEÃ‡" BUTONU Ä°ÅLEVÄ°
// Soruya cevap vermeden "GeÃ§" denilirse veya yanlÄ±ÅŸ bilinirse Ã§alÄ±ÅŸÄ±r
function markAsUnknown(){
  if(!quizCurrent) return;
  // Quality 0 = Bilmiyorum (SÄ±fÄ±rlar)
  // isCorrect false = YanlÄ±ÅŸ sayÄ±sÄ±na ekle
  toast("Tekrar listesine eklendi ğŸ“…");
  grade(quizCurrent, 0, false);
}
function skipQuestion(){
Â  if(!quizCurrent) return;
Â  state.reviewQueue.push(quizCurrent.id);
Â  DB.set("lm_review_queue", state.reviewQueue);
Â  toast("Soru sona atÄ±ldÄ±");
Â  quizCurrent=null;
Â  nextQuiz();
}

/* Speak */
function speakText(txt, lang){
Â  const u=new SpeechSynthesisUtterance(txt);
Â  // Ä°spanyolca (ES: 'es-ES') eklendi
const map={EN:"en-US", RU:"ru-RU", DE:"de-DE", FR:"fr-FR", ES:"es-ES", TR:"tr-TR"};
Â  u.lang=map[lang] || "en-US";
Â  u.rate=0.9;
Â  speechSynthesis.cancel();
Â  speechSynthesis.speak(u);
}
function speakQuizWord(){
Â  if(!quizCurrent) return;
Â  speakText(quizCurrent.term, quizCurrent.lang || "EN");
}

/* ===========================
Â  Â Export/Import/Reset
=========================== */
function exportAll(){
Â  const data = JSON.stringify({ settings:state.settings, cards:state.cards }, null, 2);
Â  prompt("Kopyala (Export JSON):", data);
}
function importAllPrompt(){
Â  const txt = prompt("Import JSON yapÄ±ÅŸtÄ±r:");
Â  if(!txt) return;
Â  try{
Â  Â  const obj=JSON.parse(txt);
Â  Â  if(obj.settings) state.settings=obj.settings;
Â  Â  if(obj.cards) state.cards=obj.cards;
Â  Â  saveAll();
Â  Â  setTheme(state.settings.theme || "dark");
Â  Â  syncQuizModeLabels();
Â  Â  toast("Import âœ…");
Â  Â  renderDash(); renderReview(); renderCards();
Â  }catch(e){
Â  Â  toast("Import hata");
Â  }
}
function hardReset(){
Â  if(!confirm("Her ÅŸeyi sÄ±fÄ±rlamak istiyor musun?")) return;
Â  localStorage.clear();
Â  location.reload();
}
/* ===========================
Â  Â TOP 100 Ä°NGÄ°LÄ°ZCE KELÄ°ME PAKETÄ° (VeritabanÄ± boÅŸsa yÃ¼klenir)
=========================== */
if (state.cards.length === 0) {
Â  // En sÄ±k kullanÄ±lan, akademik ve gÃ¼nlÃ¼k hayati kelimelerden seÃ§ki
Â  const starterPack = [
Â  Â  // --- VERBS (Fiiller) ---
Â  Â  { t: "achieve", m: "baÅŸarmak, elde etmek", y: "verb", e: "She worked hard to achieve her goals." },
Â  Â  { t: "admit", m: "kabul etmek, itiraf etmek", y: "verb", e: "He admitted that he made a mistake." },
Â  Â  { t: "affect", m: "etkilemek", y: "verb", e: "The weather can affect your mood." },
Â  Â  { t: "afford", m: "gÃ¼cÃ¼ yetmek (maddi)", y: "verb", e: "I can't afford a new car right now." },
Â  Â  { t: "allow", m: "izin vermenk", y: "verb", e: "Smoking is not allowed here." },
Â  Â  { t: "appear", m: "gÃ¶rÃ¼nmek, ortaya Ã§Ä±kmak", y: "verb", e: "He appears to be tired." },
Â  Â  { t: "appreciate", m: "takdir etmek, deÄŸerini bilmek", y: "verb", e: "I appreciate your help." },
Â  Â  { t: "argue", m: "tartÄ±ÅŸmak, iddia etmek", y: "verb", e: "They argue about money all the time." },
Â  Â  { t: "avoid", m: "kaÃ§Ä±nmak", y: "verb", e: "You should avoid eating too much sugar." },
Â  Â  { t: "become", m: "olmak, haline gelmek", y: "verb", e: "The caterpillar becomes a butterfly." },
Â  Â  { t: "believe", m: "inanmak", y: "verb", e: "I believe in you." },
Â  Â  { t: "borrow", m: "Ã¶dÃ¼nÃ§ almak", y: "verb", e: "Can I borrow your pen?" },
Â  Â  { t: "complain", m: "ÅŸikayet etmek", y: "verb", e: "He is always complaining about the noise." },
Â  Â  { t: "consider", m: "gÃ¶z Ã¶nÃ¼nde bulundurmak, dÃ¼ÅŸÃ¼nmek", y: "verb", e: "Please consider my offer." },
Â  Â  { t: "contain", m: "iÃ§ermek", y: "verb", e: "This box contains old photos." },
Â  Â  { t: "convince", m: "ikna etmek", y: "verb", e: "I couldn't convince him to stay." },
Â  Â  { t: "create", m: "yaratmak, oluÅŸturmak", y: "verb", e: "The software creates a backup automatically." },
Â  Â  { t: "decide", m: "karar vermek", y: "verb", e: "Have you decided what to wear?" },
Â  Â  { t: "describe", m: "tarif etmek, tanÄ±mlamak", y: "verb", e: "Can you describe the thief?" },
Â  Â  { t: "develop", m: "geliÅŸtirmek", y: "verb", e: "They are developing a new drug." },
Â  Â  { t: "disappear", m: "gÃ¶zden kaybolmak", y: "verb", e: "The sun disappeared behind the clouds." },
Â  Â  { t: "discover", m: "keÅŸfetmek", y: "verb", e: "Columbus discovered America." },
Â  Â  { t: "encourage", m: "cesaretlendirmek, teÅŸvik etmek", y: "verb", e: "My teacher encouraged me to study art." },
Â  Â  { t: "establish", m: "kurmak, tesis etmek", y: "verb", e: "The company was established in 1990." },
Â  Â  { t: "exist", m: "var olmak", y: "verb", e: "Does life exist on other planets?" },
Â  Â  { t: "expect", m: "ummak, beklemek", y: "verb", e: "I expect him to be late." },
Â  Â  { t: "explain", m: "aÃ§Ä±klamak", y: "verb", e: "Can you explain this rule to me?" },
Â  Â  { t: "explore", m: "keÅŸfe Ã§Ä±kmak, incelemek", y: "verb", e: "We explored the old city." },
Â  Â  { t: "improve", m: "geliÅŸtirmek, iyileÅŸtirmek", y: "verb", e: "You need to improve your English." },
Â  Â  { t: "increase", m: "artmak, arttÄ±rmak", y: "verb", e: "Sales increased by 10% this year." },
Â  Â  { t: "indicate", m: "gÃ¶stermek, iÅŸaret etmek", y: "verb", e: "The map indicates where the treasure is." },
Â  Â  { t: "insist", m: "Ä±srar etmek", y: "verb", e: "She insisted on paying for dinner." },
Â  Â  { t: "involve", m: "iÃ§ermek, kapsamak", y: "verb", e: "The job involves a lot of travel." },
Â  Â  { t: "mention", m: "bahsetmek", y: "verb", e: "Did he mention my name?" },
Â  Â  { t: "obtain", m: "elde etmek, edinmek", y: "verb", e: "Where can I obtain a visa?" },
Â  Â  { t: "occur", m: "meydana gelmek", y: "verb", e: "The accident occurred at night." },
Â  Â  { t: "offer", m: "teklif etmek, sunmak", y: "verb", e: "He offered me a job." },
Â  Â  { t: "participate", m: "katÄ±lmak", y: "verb", e: "All students must participate in the event." },
Â  Â  { t: "perform", m: "sahnelemek, performans gÃ¶stermek", y: "verb", e: "The band performed live." },
Â  Â  { t: "persuade", m: "ikna etmek", y: "verb", e: "Try to persuade him to come." },
Â  Â  { t: "predict", m: "tahmin etmek, Ã¶ngÃ¶rmek", y: "verb", e: "It is hard to predict the weather." },
Â  Â  { t: "prepare", m: "hazÄ±rlamak", y: "verb", e: "I need to prepare for the exam." },
Â  Â  { t: "prevent", m: "Ã¶nlemek, engel olmak", y: "verb", e: "Seatbelts prevent injuries." },
Â  Â  { t: "produce", m: "Ã¼retmek", y: "verb", e: "This factory produces cars." },
Â  Â  { t: "protect", m: "korumak", y: "verb", e: "Sunglasses protect your eyes from the sun." },
Â  Â  { t: "prove", m: "kanÄ±tlamak", y: "verb", e: "Can you prove your theory?" },
Â  Â  { t: "provide", m: "saÄŸlamak, temin etmek", y: "verb", e: "The hotel provides free Wi-Fi." },
Â  Â  { t: "realize", m: "farkÄ±na varmak", y: "verb", e: "I realized I left my keys at home." },
Â  Â  { t: "recognize", m: "tanÄ±mak (birini/bir ÅŸeyi)", y: "verb", e: "I didn't recognize him with a beard." },
Â  Â  { t: "reduce", m: "azaltmak", y: "verb", e: "We need to reduce costs." },
Â  Â  { t: "refuse", m: "reddetmek", y: "verb", e: "He refused to answer the question." },
Â  Â  { t: "regret", m: "piÅŸman olmak", y: "verb", e: "I regret saying that." },
Â  Â  { t: "relate", m: "iliÅŸkilendirmek", y: "verb", e: "How does this relate to the problem?" },
Â  Â  { t: "remain", m: "kalmak (durumunu korumak)", y: "verb", e: "Please remain seated." },
Â  Â  { t: "remember", m: "hatÄ±rlamak", y: "verb", e: "Do you remember me?" },
Â  Â  { t: "remind", m: "hatÄ±rlatmak", y: "verb", e: "Please remind me to call her." },
Â  Â  { t: "replace", m: "yerini almak, deÄŸiÅŸtirmek", y: "verb", e: "Robots might replace workers." },
Â  Â  { t: "require", m: "gerektirmek", y: "verb", e: "Plants require water to grow." },
Â  Â  { t: "reveal", m: "aÃ§Ä±ÄŸa Ã§Ä±karmak", y: "verb", e: "The investigation revealed the truth." },
Â  Â  { t: "seem", m: "gibi gÃ¶rÃ¼nmek", y: "verb", e: "It seems like a good idea." },
Â  Â  { t: "solve", m: "Ã§Ã¶zmek", y: "verb", e: "I can't solve this puzzle." },
Â  Â  { t: "suffer", m: "acÄ± Ã§ekmek, katlanmak", y: "verb", e: "She suffers from migraines." },
Â  Â  { t: "suggest", m: "Ã¶nermek", y: "verb", e: "I suggest you take a taxi." },
Â  Â  { t: "supply", m: "tedarik etmek", y: "verb", e: "They supply us with paper." },
Â  Â  { t: "suppose", m: "varsaymak, zannetmek", y: "verb", e: "I suppose you are right." },
Â  Â  { t: "survive", m: "hayatta kalmak", y: "verb", e: "Only a few survived the crash." },
Â  Â  { t: "tend", m: "eÄŸiliminde olmak", y: "verb", e: "Prices tend to go up in winter." },
Â  Â  { t: "threaten", m: "tehdit etmek", y: "verb", e: "He threatened to call the police." },
Â  Â  { t: "understand", m: "anlamak", y: "verb", e: "I don't understand French." },
Â  Â  { t: "wonder", m: "merak etmek", y: "verb", e: "I wonder what happened." },

Â  Â  // --- NOUNS (Ä°simler) ---
Â  Â  { t: "ability", m: "yetenek", y: "noun", e: "He has the ability to learn quickly." },
Â  Â  { t: "access", m: "eriÅŸim", y: "noun", e: "Do you have internet access?" },
Â  Â  { t: "accident", m: "kaza", y: "noun", e: "He had a car accident." },
Â  Â  { t: "account", m: "hesap", y: "noun", e: "I opened a bank account." },
Â  Â  { t: "advantage", m: "avantaj", y: "noun", e: "Speed is a big advantage." },
Â  Â  { t: "advice", m: "tavsiye", y: "noun", e: "Can you give me some advice?" },
Â  Â  { t: "amount", m: "miktar", y: "noun", e: "A large amount of money." },
Â  Â  { t: "attitude", m: "tavÄ±r, tutum", y: "noun", e: "She has a positive attitude." },
Â  Â  { t: "audience", m: "seyirci kitlesi", y: "noun", e: "The audience clapped loudly." },
Â  Â  { t: "behavior", m: "davranÄ±ÅŸ", y: "noun", e: "His behavior was unacceptable." },
Â  Â  { t: "benefit", m: "fayda, yarar", y: "noun", e: "The benefits of exercise are many." },
Â  Â  { t: "career", m: "kariyer", y: "noun", e: "She wants a career in medicine." },
Â  Â  { t: "challenge", m: "zorluk, meydan okuma", y: "noun", e: "This game is a real challenge." },
Â  Â  { t: "choice", m: "seÃ§im", y: "noun", e: "It was a difficult choice." },
Â  Â  { t: "circumstance", m: "koÅŸul, durum", y: "noun", e: "Under normal circumstances, I would agree." },
Â  Â  { t: "community", m: "topluluk", y: "noun", e: "We have a strong community." },
Â  Â  { t: "competition", m: "yarÄ±ÅŸma, rekabet", y: "noun", e: "There is a lot of competition." },
Â  Â  { t: "complaint", m: "ÅŸikayet", y: "noun", e: "I have a complaint about the food." },
Â  Â  { t: "conclusion", m: "sonuÃ§", y: "noun", e: "What is your conclusion?" },
Â  Â  { t: "condition", m: "durum, ÅŸart", y: "noun", e: "The car is in good condition." },
Â  Â  { t: "consequence", m: "sonuÃ§ (genelde kÃ¶tÃ¼)", y: "noun", e: "You must face the consequences." },
Â  Â  { t: "contribution", m: "katkÄ±", y: "noun", e: "Thank you for your contribution." },
Â  Â  { t: "courage", m: "cesaret", y: "noun", e: "It takes courage to speak up." },
Â  Â  { t: "culture", m: "kÃ¼ltÃ¼r", y: "noun", e: "I love learning about other cultures." },
Â  Â  { t: "damage", m: "hasar", y: "noun", e: "The storm caused a lot of damage." },
Â  Â  { t: "decision", m: "karar", y: "noun", e: "It was a tough decision." },
Â  Â  { t: "demand", m: "talep", y: "noun", e: "Supply and demand." },
Â  Â  { t: "development", m: "geliÅŸim", y: "noun", e: "Economic development is slow." },
Â  Â  { t: "difference", m: "fark", y: "noun", e: "What is the difference?" },
Â  Â  { t: "direction", m: "yÃ¶n", y: "noun", e: "Which direction did he go?" },
Â  Â  { t: "disease", m: "hastalÄ±k", y: "noun", e: "Heart disease is common." },
Â  Â  { t: "doubt", m: "ÅŸÃ¼phe", y: "noun", e: "I have no doubt about it." },
Â  Â  { t: "economy", m: "ekonomi", y: "noun", e: "The global economy is recovering." },
Â  Â  { t: "education", m: "eÄŸitim", y: "noun", e: "Education is very important." },
Â  Â  { t: "effect", m: "etki", y: "noun", e: "The special effects were amazing." },
Â  Â  { t: "effort", m: "Ã§aba", y: "noun", e: "He put a lot of effort into this." },
Â  Â  { t: "election", m: "seÃ§im (siyasi)", y: "noun", e: "The election is next month." },
Â  Â  { t: "emotion", m: "duygu", y: "noun", e: "Fear is a strong emotion." },
Â  Â  { t: "emphasis", m: "vurgu", y: "noun", e: "The emphasis is on quality." },
Â  Â  { t: "energy", m: "enerji", y: "noun", e: "I don't have enough energy." },
Â  Â  { t: "environment", m: "Ã§evre", y: "noun", e: "We must protect the environment." },
Â  Â  { t: "equipment", m: "ekipman", y: "noun", e: "We need camping equipment." },
Â  Â  { t: "evidence", m: "kanÄ±t", y: "noun", e: "There is no evidence of a crime." },
Â  Â  { t: "experience", m: "tecrÃ¼be, deneyim", y: "noun", e: "She has 5 years of experience." },
Â  Â  { t: "explanation", m: "aÃ§Ä±klama", y: "noun", e: "I need an explanation." },
Â  Â  { t: "fact", m: "gerÃ§ek", y: "noun", e: "It is a scientific fact." },
Â  Â  { t: "failure", m: "baÅŸarÄ±sÄ±zlÄ±k", y: "noun", e: "Failure is part of learning." },
Â  Â  { t: "feature", m: "Ã¶zellik", y: "noun", e: "This phone has many new features." },
Â  Â  { t: "feeling", m: "his", y: "noun", e: "I have a bad feeling about this." },
Â  Â  { t: "freedom", m: "Ã¶zgÃ¼rlÃ¼k", y: "noun", e: "Freedom of speech." },
Â  Â  { t: "goal", m: "hedef, amaÃ§", y: "noun", e: "My goal is to learn English." },
Â  Â  { t: "government", m: "hÃ¼kÃ¼met", y: "noun", e: "The government lowered taxes." },
Â  Â  { t: "growth", m: "bÃ¼yÃ¼me", y: "noun", e: "Population growth is rapid." },
Â  Â  { t: "habit", m: "alÄ±ÅŸkanlÄ±k", y: "noun", e: "Smoking is a bad habit." },
Â  Â  { t: "health", m: "saÄŸlÄ±k", y: "noun", e: "Health is wealth." },
Â  Â  { t: "history", m: "tarih", y: "noun", e: "History repeats itself." },
Â  Â  { t: "idea", m: "fikir", y: "noun", e: "I have a great idea." },
Â  Â  { t: "importance", m: "Ã¶nem", y: "noun", e: "I understand the importance of time." },
Â  Â  { t: "income", m: "gelir", y: "noun", e: "His income has increased." },
Â  Â  { t: "industry", m: "sanayi, endÃ¼stri", y: "noun", e: "The car industry." },
Â  Â  { t: "information", m: "bilgi", y: "noun", e: "For more information, visit our website." },
Â  Â  { t: "injury", m: "yaralanma", y: "noun", e: "Luckily, it was a minor injury." },
Â  Â  { t: "knowledge", m: "bilgi (birikim)", y: "noun", e: "Knowledge is power." },

Â  Â  // --- ADJECTIVES (SÄ±fatlar) ---
Â  Â  { t: "able", m: "yapabilir, muktedir", y: "adj", e: "Will you be able to come?" },
Â  Â  { t: "actual", m: "gerÃ§ek, asÄ±l", y: "adj", e: "What is the actual cost?" },
Â  Â  { t: "afraid", m: "korkmuÅŸ", y: "adj", e: "Are you afraid of spiders?" },
Â  Â  { t: "alone", m: "yalnÄ±z", y: "adj", e: "I am home alone." },
Â  Â  { t: "amazing", m: "ÅŸaÅŸÄ±rtÄ±cÄ±, harika", y: "adj", e: "The view was amazing." },
Â  Â  { t: "angry", m: "kÄ±zgÄ±n", y: "adj", e: "Why are you angry?" },
Â  Â  { t: "available", m: "mÃ¼sait, mevcut", y: "adj", e: "Is this seat available?" },
Â  Â  { t: "basic", m: "temel", y: "adj", e: "Basic human rights." },
Â  Â  { t: "beautiful", m: "gÃ¼zel", y: "adj", e: "A beautiful garden." },
Â  Â  { t: "best", m: "en iyi", y: "adj", e: "She is my best friend." },
Â  Â  { t: "better", m: "daha iyi", y: "adj", e: "I feel better today." },
Â  Â  { t: "big", m: "bÃ¼yÃ¼k", y: "adj", e: "It's a big house." },
Â  Â  { t: "boring", m: "sÄ±kÄ±cÄ±", y: "adj", e: "The movie was boring." },
Â  Â  { t: "brave", m: "cesur", y: "adj", e: "He was a brave soldier." },
Â  Â  { t: "bright", m: "parlak, zeki", y: "adj", e: "A bright future." },
Â  Â  { t: "busy", m: "meÅŸgul", y: "adj", e: "I am very busy right now." },
Â  Â  { t: "careful", m: "dikkatli", y: "adj", e: "Be careful driving." },
Â  Â  { t: "cheap", m: "ucuz", y: "adj", e: "This shirt was very cheap." },
Â  Â  { t: "clean", m: "temiz", y: "adj", e: "Keep your room clean." },
Â  Â  { t: "clear", m: "aÃ§Ä±k, net", y: "adj", e: "The instructions are clear." },
Â  Â  { t: "common", m: "yaygÄ±n, ortak", y: "adj", e: "It is a common mistake." },
Â  Â  { t: "complex", m: "karmaÅŸÄ±k", y: "adj", e: "It is a complex problem." },
Â  Â  { t: "concerned", m: "endiÅŸeli", y: "adj", e: "I am concerned about his health." },
Â  Â  { t: "confident", m: "kendine gÃ¼venen", y: "adj", e: "She is confident she will win." },
Â  Â  { t: "confused", m: "kafasÄ± karÄ±ÅŸmÄ±ÅŸ", y: "adj", e: "I am totally confused." },
Â  Â  { t: "conscious", m: "bilinÃ§li", y: "adj", e: "He is conscious of his faults." },
Â  Â  { t: "consistent", m: "tutarlÄ±", y: "adj", e: "We need consistent results." },
Â  Â  { t: "constant", m: "sÃ¼rekli", y: "adj", e: "Constant noise makes me crazy." },
Â  Â  { t: "crazy", m: "Ã§Ä±lgÄ±n, deli", y: "adj", e: "Are you crazy?" },
Â  Â  { t: "creative", m: "yaratÄ±cÄ±", y: "adj", e: "She is very creative." },
Â  Â  { t: "critical", m: "eleÅŸtirel, kritik", y: "adj", e: "It is a critical moment." },
Â  Â  { t: "curious", m: "meraklÄ±", y: "adj", e: "I was curious to see it." },
Â  Â  { t: "dangerous", m: "tehlikeli", y: "adj", e: "It is dangerous to swim here." },
Â  Â  { t: "dark", m: "karanlÄ±k", y: "adj", e: "It gets dark early in winter." },
Â  Â  { t: "deep", m: "derin", y: "adj", e: "The ocean is deep." },
Â  Â  { t: "different", m: "farklÄ±", y: "adj", e: "We have different opinions." },
Â  Â  { t: "difficult", m: "zor", y: "adj", e: "Math is difficult for me." },
Â  Â  { t: "dirty", m: "kirli", y: "adj", e: "Your shoes are dirty." },
Â  Â  { t: "disappointed", m: "hayal kÄ±rÄ±klÄ±ÄŸÄ±na uÄŸramÄ±ÅŸ", y: "adj", e: "I was disappointed with the service." },
Â  Â  { t: "distinct", m: "belirgin, farklÄ±", y: "adj", e: "There is a distinct smell." },
Â  Â  { t: "dramatic", m: "dramatik, Ã§arpÄ±cÄ±", y: "adj", e: "A dramatic change." },
Â  Â  { t: "early", m: "erken", y: "adj", e: "I woke up early." },
Â  Â  { t: "easy", m: "kolay", y: "adj", e: "The test was easy." },
Â  Â  { t: "effective", m: "etkili", y: "adj", e: "This medicine is effective." },
Â  Â  { t: "efficient", m: "verimli", y: "adj", e: "He is an efficient worker." },
Â  Â  { t: "embarrassed", m: "utanmÄ±ÅŸ", y: "adj", e: "I felt embarrassed." },
Â  Â  { t: "empty", m: "boÅŸ", y: "adj", e: "The glass is empty." },
Â  Â  { t: "environmental", m: "Ã§evresel", y: "adj", e: "Environmental issues." },
Â  Â  { t: "equal", m: "eÅŸit", y: "adj", e: "All men are created equal." },
Â  Â  { t: "essential", m: "temel, elzem", y: "adj", e: "Water is essential for life." },
Â  Â  { t: "exact", m: "tam, kesin", y: "adj", e: "Tell me the exact time." },
Â  Â  { t: "excellent", m: "mÃ¼kemmel", y: "adj", e: "Excellent work!" },
Â  Â  { t: "excited", m: "heyecanlÄ±", y: "adj", e: "I am excited about the trip." },
Â  Â  { t: "expensive", m: "pahalÄ±", y: "adj", e: "Cars are expensive." },
Â  Â  { t: "external", m: "harici", y: "adj", e: "External hard drive." },
Â  Â  { t: "extreme", m: "aÅŸÄ±rÄ±", y: "adj", e: "Extreme weather." },
Â  Â  { t: "famous", m: "Ã¼nlÃ¼", y: "adj", e: "He is a famous actor." },
Â  Â  { t: "fast", m: "hÄ±zlÄ±", y: "adj", e: "A fast car." },
Â  Â  { t: "financial", m: "finansal", y: "adj", e: "Financial problems." },
Â  Â  { t: "foreign", m: "yabancÄ±", y: "adj", e: "Foreign language." },
Â  Â  { t: "formal", m: "resmi", y: "adj", e: "Formal dress code." },
Â  Â  { t: "free", m: "Ã¶zgÃ¼r, bedava", y: "adj", e: "Are you free tonight?" },
Â  Â  { t: "frequent", m: "sÄ±k", y: "adj", e: "Frequent flyer." },
Â  Â  { t: "friendly", m: "arkadaÅŸ canlÄ±sÄ±", y: "adj", e: "A friendly dog." },
Â  Â  { t: "full", m: "dolu, tok", y: "adj", e: "I am full." },
Â  Â  { t: "funny", m: "komik", y: "adj", e: "He is very funny." },
Â  Â  { t: "general", m: "genel", y: "adj", e: "In general, I agree." },
Â  Â  { t: "global", m: "kÃ¼resel", y: "adj", e: "Global warming." },
Â  Â  { t: "good", m: "iyi", y: "adj", e: "Have a good day." },
Â  Â  { t: "great", m: "harika, bÃ¼yÃ¼k", y: "adj", e: "It was a great party." },
Â  Â  { t: "guilty", m: "suÃ§lu", y: "adj", e: "He feels guilty." },
Â  Â  { t: "happy", m: "mutlu", y: "adj", e: "A happy family." },
Â  Â  { t: "hard", m: "zor, sert", y: "adj", e: "The ground is hard." },
Â  Â  { t: "healthy", m: "saÄŸlÄ±klÄ±", y: "adj", e: "Healthy food." },
Â  Â  { t: "heavy", m: "aÄŸÄ±r", y: "adj", e: "This bag is heavy." },
Â  Â  { t: "helpful", m: "yardÄ±msever", y: "adj", e: "The staff was helpful." },
Â  Â  { t: "historical", m: "tarihi", y: "adj", e: "A historical building." },
Â  Â  { t: "honest", m: "dÃ¼rÃ¼st", y: "adj", e: "Be honest with me." },
Â  Â  { t: "hot", m: "sÄ±cak", y: "adj", e: "It is hot today." },
Â  Â  { t: "huge", m: "kocaman", y: "adj", e: "A huge mistake." },
Â  Â  { t: "human", m: "insani", y: "adj", e: "Human rights." },
Â  Â  { t: "hungry", m: "aÃ§", y: "adj", e: "I am hungry." },
Â  Â  { t: "illegal", m: "yasadÄ±ÅŸÄ±", y: "adj", e: "It is illegal to park here." },
Â  Â  { t: "important", m: "Ã¶nemli", y: "adj", e: "This is very important." },
Â  Â  { t: "impossible", m: "imkansÄ±z", y: "adj", e: "Nothing is impossible." }
Â  Â Â 
Â  ];

Â  state.cards = starterPack.map(w => ({
Â  Â  id: uid(),
Â  Â  lang: "EN",
Â  Â  term: w.t,
Â  Â  meaning: w.m,
Â  Â  type: w.y,
Â  Â  example: w.e,
Â  Â  note: "BaÅŸlangÄ±Ã§ Paketi",
Â  Â  due: now(),Â 
Â  Â  srs: { interval: 0, reps: 0, ef: 2.5 },
Â  Â  createdAt: now(),
Â  Â  updatedAt: now()
Â  }));

Â  saveAll();
Â  console.log("BaÅŸlangÄ±Ã§ paketi (200+ Kelime) yÃ¼klendi.");
}
/* ===========================
Â  Â Init
=========================== */
setTheme(state.settings.theme || "dark");
syncQuizModeLabels();
renderDash(); renderReview(); renderCards();
if(!state.reviewQueue) state.reviewQueue=[];
Â  /* ===========================
Â  Â EKSTRA KELÄ°ME PAKETÄ° (Mevcut listenin Ã¼zerine ekleme yapar)
Â  Â Ã–ncekileri silmez, sadece olmayanlarÄ± ekler.
=========================== */
(function addExtraWords() {
Â  const extraPack = [
Â  Â  // --- YENÄ° FÄ°Ä°LLER (VERBS) ---
Â  Â  { t: "apply", m: "baÅŸvurmak, uygulamak", y: "verb", e: "I applied for the job." },
Â  Â  { t: "break", m: "kÄ±rmak, bozmak", y: "verb", e: "Don't break the glass." },
Â  Â  { t: "build", m: "inÅŸa etmek", y: "verb", e: "They are building a new house." },
Â  Â  { t: "buy", m: "satÄ±n almak", y: "verb", e: "I want to buy a car." },
Â  Â  { t: "care", m: "Ã¶nemsemek, ilgilenmek", y: "verb", e: "I don't care about money." },
Â  Â  { t: "catch", m: "yakalamak", y: "verb", e: "Catch the ball!" },
Â  Â  { t: "change", m: "deÄŸiÅŸtirmek", y: "verb", e: "You haven't changed at all." },
Â  Â  { t: "check", m: "kontrol etmek", y: "verb", e: "Please check your answers." },
Â  Â  { t: "choose", m: "seÃ§mek", y: "verb", e: "Choose a color." },
Â  Â  { t: "close", m: "kapatmak", y: "verb", e: "Close the door, please." },
Â  Â  { t: "communicate", m: "iletiÅŸim kurmak", y: "verb", e: "We communicate by email." },
Â  Â  { t: "complete", m: "tamamlamak", y: "verb", e: "Complete the sentence." },
Â  Â  { t: "connect", m: "baÄŸlamak, baÄŸlanmak", y: "verb", e: "Connect to the internet." },
Â  Â  { t: "control", m: "kontrol etmek, yÃ¶netmek", y: "verb", e: "He can't control his anger." },
Â  Â  { t: "cook", m: "piÅŸirmek", y: "verb", e: "My mom cooks delicious food." },
Â  Â  { t: "cost", m: "mal olmak (fiyat)", y: "verb", e: "How much does it cost?" },
Â  Â  { t: "count", m: "saymak", y: "verb", e: "Can you count to ten?" },
Â  Â  { t: "cover", m: "Ã¶rtmek, kaplamak", y: "verb", e: "Snow covered the ground." },
Â  Â  { t: "cry", m: "aÄŸlamak", y: "verb", e: "Don't cry, be happy." },
Â  Â  { t: "cut", m: "kesmek", y: "verb", e: "Cut the paper." },
Â  Â  { t: "dance", m: "dans etmek", y: "verb", e: "Do you like to dance?" },
Â  Â  { t: "deal", m: "uÄŸraÅŸmak, anlaÅŸmak", y: "verb", e: "I can't deal with this problem." },
Â  Â  { t: "depend", m: "baÄŸlÄ± olmak", y: "verb", e: "It depends on the weather." },
Â  Â  { t: "design", m: "tasarlamak", y: "verb", e: "Who designed this building?" },
Â  Â  { t: "destroy", m: "yok etmek", y: "verb", e: "Fire destroyed the house." },

Â  Â  // --- YENÄ° Ä°SÄ°MLER (NOUNS) ---
Â  Â  { t: "action", m: "eylem, aksiyon", y: "noun", e: "Take action now." },
Â  Â  { t: "activity", m: "aktivite", y: "noun", e: "Outdoor activities." },
Â  Â  { t: "age", m: "yaÅŸ, Ã§aÄŸ", y: "noun", e: "What is your age?" },
Â  Â  { t: "air", m: "hava", y: "noun", e: "Fresh air." },
Â  Â  { t: "answer", m: "cevap", y: "noun", e: "I need an answer." },
Â  Â  { t: "area", m: "alan, bÃ¶lge", y: "noun", e: "This is a restricted area." },
Â  Â  { t: "art", m: "sanat", y: "noun", e: "Modern art." },
Â  Â  { t: "bed", m: "yatak", y: "noun", e: "Time to go to bed." },
Â  Â  { t: "blood", m: "kan", y: "noun", e: "Blood type." },
Â  Â  { t: "body", m: "vÃ¼cut", y: "noun", e: "Human body." },
Â  Â  { t: "book", m: "kitap", y: "noun", e: "Read a book." },
Â  Â  { t: "box", m: "kutu", y: "noun", e: "What is in the box?" },
Â  Â  { t: "boy", m: "erkek Ã§ocuk", y: "noun", e: "He is a good boy." },
Â  Â  { t: "business", m: "iÅŸ, iÅŸletme", y: "noun", e: "Business trip." },
Â  Â  { t: "car", m: "araba", y: "noun", e: "A fast car." },
Â  Â  { t: "case", m: "durum, vaka", y: "noun", e: "In that case, I agree." },
Â  Â  { t: "center", m: "merkez", y: "noun", e: "City center." },
Â  Â  { t: "change", m: "deÄŸiÅŸim, para Ã¼stÃ¼", y: "noun", e: "Keep the change." },
Â  Â  { t: "city", m: "ÅŸehir", y: "noun", e: "New York is a big city." },
Â  Â  { t: "class", m: "sÄ±nÄ±f, ders", y: "noun", e: "History class." },
Â  Â  { t: "color", m: "renk", y: "noun", e: "What is your favorite color?" },
Â  Â  { t: "company", m: "ÅŸirket", y: "noun", e: "A tech company." },
Â  Â  { t: "country", m: "Ã¼lke", y: "noun", e: "Which country are you from?" },
Â  Â  { t: "day", m: "gÃ¼n", y: "noun", e: "Have a nice day." },
Â  Â  { t: "death", m: "Ã¶lÃ¼m", y: "noun", e: "Life and death." },

Â  Â  // --- YENÄ° SIFATLAR (ADJECTIVES) ---
Â  Â  { t: "bad", m: "kÃ¶tÃ¼", y: "adj", e: "Bad weather." },
Â  Â  { t: "big", m: "bÃ¼yÃ¼k", y: "adj", e: "A big house." },
Â  Â  { t: "black", m: "siyah", y: "adj", e: "Black coffee." },
Â  Â  { t: "blue", m: "mavi", y: "adj", e: "Blue sky." },
Â  Â  { t: "certain", m: "kesin, belirli", y: "adj", e: "Are you certain?" },
Â  Â  { t: "cold", m: "soÄŸuk", y: "adj", e: "It is cold outside." },
Â  Â  { t: "cool", m: "serin, havalÄ±", y: "adj", e: "He is a cool guy." },
Â  Â  { t: "current", m: "ÅŸu anki, mevcut", y: "adj", e: "Current situation." },
Â  Â  { t: "dead", m: "Ã¶lÃ¼", y: "adj", e: "A dead tree." },
Â  Â  { t: "dry", m: "kuru", y: "adj", e: "My throat is dry." },
Â  Â  { t: "early", m: "erken", y: "adj", e: "Early morning." },
Â  Â  { t: "fair", m: "adil", y: "adj", e: "That's not fair." },
Â  Â  { t: "false", m: "yanlÄ±ÅŸ, sahte", y: "adj", e: "False information." },
Â  Â  { t: "final", m: "son, nihai", y: "adj", e: "Final exam." },
Â  Â  { t: "fine", m: "iyi, ince", y: "adj", e: "I am fine, thanks." },
Â  Â  { t: "foreign", m: "yabancÄ±", y: "adj", e: "Foreign language." },
Â  Â  { t: "future", m: "gelecek", y: "adj", e: "Future plans." },
Â  Â  { t: "general", m: "genel", y: "adj", e: "General knowledge." },
Â  Â  { t: "green", m: "yeÅŸil", y: "adj", e: "Green grass." },
Â  Â  { t: "high", m: "yÃ¼ksek", y: "adj", e: "High prices." },
Â  Â  { t: "human", m: "insani", y: "adj", e: "Human nature." },
Â  Â  { t: "kind", m: "kibar", y: "adj", e: "Be kind to others." },
Â  Â  { t: "large", m: "geniÅŸ, bÃ¼yÃ¼k", y: "adj", e: "A large pizza." },
Â  Â  { t: "late", m: "geÃ§", y: "adj", e: "Don't be late." },
Â  Â  { t: "left", m: "sol", y: "adj", e: "Turn left." }
Â  ];

Â  let addedCount = 0;
Â  extraPack.forEach(w => {
Â  Â  // Kelime daha Ã¶nce var mÄ± diye kontrol et (bÃ¼yÃ¼k/kÃ¼Ã§Ã¼k harf duyarsÄ±z)
Â  Â  const exists = state.cards.some(c => c.term.toLowerCase().trim() === w.t.toLowerCase().trim());
Â  Â Â 
Â  Â  // EÄŸer yoksa ekle
Â  Â  if (!exists) {
Â  Â  Â  state.cards.push({
Â  Â  Â  Â  id: uid(),
Â  Â  Â  Â  lang: "EN",
Â  Â  Â  Â  term: w.t,
Â  Â  Â  Â  meaning: w.m,
Â  Â  Â  Â  type: w.y,
Â  Â  Â  Â  example: w.e,
Â  Â  Â  Â  note: "Ekstra Paket",
Â  Â  Â  Â  due: now(),Â 
Â  Â  Â  Â  srs: { interval: 0, reps: 0, ef: 2.5 },
Â  Â  Â  Â  createdAt: now(),
Â  Â  Â  Â  updatedAt: now()
Â  Â  Â  });
Â  Â  Â  addedCount++;
Â  Â  }
Â  });

Â  if (addedCount > 0) {
Â  Â  saveAll();
Â  Â  console.log(addedCount + " adet yeni kelime eklendi.");
Â  Â  // EkranÄ± gÃ¼ncelle ki yeni kelimeler gÃ¶rÃ¼nsÃ¼n
Â  Â  renderDash(); renderReview(); renderCards();
Â  Â  toast(addedCount + " yeni kelime eklendi! ğŸš€");
Â  }
})();
/* ===========================
Â  Â TÃœRKÃ‡E -> Ä°NGÄ°LÄ°ZCE Ã‡EVÄ°RÄ° MOTORU
=========================== */
async function doQuickTranslateTR(){
Â  const input = document.getElementById("quickTransInputTR");
Â  // EÄŸer input yoksa hata vermesin
Â  if(!input) return;

Â  const term = input.value.trim();
Â  if(!term) return toast("LÃ¼tfen TÃ¼rkÃ§e kelime yazÄ±n");

Â  toast("Ã‡evriliyor... â³");

Â  // Google Translate API: Kaynak=TR, Hedef=EN
Â  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=tr&tl=en&dt=t&dt=bd&q=${encodeURIComponent(term)}`;

Â  try{
Â  Â  const r = await fetch(url);
Â  Â  if(!r.ok) throw new Error("BaÄŸlantÄ± hatasÄ±");
Â  Â  const data = await r.json();
Â  Â Â 
Â  Â  // Ana Ã‡eviri (Ä°ngilizcesi)
Â  Â  let mainMean = (data?.[0]?.[0]?.[0] || "").trim();
Â  Â Â 
Â  Â  // DetaylÄ± Anlamlar (Varsa)
Â  Â  let extraMeans = [];
Â  Â  if(data[1]){
Â  Â  Â  data[1].forEach(group => {
Â  Â  Â  Â  const pos = group[0]; // noun, verb vs.
Â  Â  Â  Â  const words = group[1].slice(0, 4).join(", ");Â 
Â  Â  Â  Â  extraMeans.push(`[${pos}]: ${words}`);
Â  Â  Â  });
Â  Â  }

Â  Â  // SonuÃ§ Penceresi Ä°Ã§eriÄŸi
Â  Â  let content = `
Â  Â  Â  <div style="font-size:24px; font-weight:900; color:var(--warn); text-align:center;">${term}</div>
Â  Â  Â  <div style="font-size:32px; margin-top:10px; text-align:center; color:var(--text);">ğŸ‡¬ğŸ‡§ ${mainMean}</div>
Â  Â  `;
Â  Â Â 
Â  Â  if(extraMeans.length > 0){
Â  Â  Â  Â  content += `<div style="margin-top:15px; padding:10px; background:var(--card2); border-radius:8px; font-size:14px; color:var(--muted);">${extraMeans.join("<br>")}</div>`;
Â  Â  }

Â  Â  document.getElementById("trResContent").innerHTML = content;
Â  Â Â 
Â  Â  // Karta Ekleme HafÄ±zasÄ±:
Â  Â  // KullanÄ±cÄ± TÃ¼rkÃ§e arattÄ± ama karta eklerken Ä°ngilizcesini "Term" (Ã–n yÃ¼z) yapacaÄŸÄ±z.
Â  Â  quickTermCache = mainMean;Â 
Â  Â Â 
Â  Â  openSheet("transResultSheet"); // Pencereyi aÃ§
Â  Â  input.value = ""; // Kutuyu temizle

Â  } catch(e){Â 
Â  Â  console.log(e);
Â  Â  toast("Ã‡eviri yapÄ±lamadÄ±");Â 
Â  }
}
</script>
</body>
</html>
